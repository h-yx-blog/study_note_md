​	







#  Spring学习笔记-狂神版

本文出自https://www.cnblogs.com/renxuw/p/12994080.html

<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown">
    <span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="前言" tid="tid-tMZhxQ" class="header__dev"><span style=""><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">前言</span></b></h1></span>
<p>Mybatis学完开始学Spring</p>
<p>同样先放上参考文档，现在只是需要短时间之内要过一下基础，等考完研再看要不要深入学习吧。</p>
<p>B站 <a href="https://www.bilibili.com/video/BV1WE411d7Dv" target="_blank">https://www.bilibili.com/video/BV1WE411d7Dv</a></p>
<p>狂神说Spring01：概述及IOC理论推导 <a href="https://mp.weixin.qq.com/s/VM6INdNB_hNfXCMq3UZgTQ" target="_blank">https://mp.weixin.qq.com/s/VM6INdNB_hNfXCMq3UZgTQ</a></p>
<p>狂神说Spring02：快速上手Spring <a href="https://mp.weixin.qq.com/s/Sa39ulmHpNFJ9u48rwCG7A" target="_blank">https://mp.weixin.qq.com/s/Sa39ulmHpNFJ9u48rwCG7A</a></p>
<p>狂神说Spring03：依赖注入（DI）<a href="https://mp.weixin.qq.com/s/Nf-cYENenoZpXqDjv574ig" target="_blank">https://mp.weixin.qq.com/s/Nf-cYENenoZpXqDjv574ig</a></p>
<p>狂神说Spring04：自动装配 <a href="https://mp.weixin.qq.com/s/kvp_3Uva1J2Q5ZVqCUzEsA" target="_blank">https://mp.weixin.qq.com/s/kvp_3Uva1J2Q5ZVqCUzEsA</a></p>
<p>狂神说Spring05：使用注解开发 <a href="https://mp.weixin.qq.com/s/dCeQwaQ-A97FiUxs7INlHw" target="_blank">https://mp.weixin.qq.com/s/dCeQwaQ-A97FiUxs7INlHw</a></p>
<p>狂神说Spring06：静态/动态代理模式 <a href="https://mp.weixin.qq.com/s/McxiyucxAQYPSOaJSUCCRQ" target="_blank">https://mp.weixin.qq.com/s/McxiyucxAQYPSOaJSUCCRQ</a></p>
<p>狂神说Spring07：AOP就这么简单 <a href="https://mp.weixin.qq.com/s/zofgBRRrnEf17MiGZN8IJQ" target="_blank">https://mp.weixin.qq.com/s/zofgBRRrnEf17MiGZN8IJQ</a></p>
<p>狂神说Spring08：整合MyBatis <a href="https://mp.weixin.qq.com/s/gXFMNU83_7PqTkNZUgvigA" target="_blank">https://mp.weixin.qq.com/s/gXFMNU83_7PqTkNZUgvigA</a></p>
<p>狂神说Spring09：声明式事务 <a href="https://mp.weixin.qq.com/s/mYOBJdygHDcXPYBls7cxUA" target="_blank">https://mp.weixin.qq.com/s/mYOBJdygHDcXPYBls7cxUA</a></p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="1、spring" tid="tid-tZemPe" class="header__dev"><span style=""><b class="dev__fe"><i>2</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">1、Spring</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="11、简介" tid="tid-RPQZDp" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>2</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">1.1、简介</span></b></h2></span>
<p>Spring : 春天 ---&gt;给软件行业带来了春天</p>
<p>2002年，Rod Jahnson首次推出了Spring框架雏形interface21框架。</p>
<p>2004年3月24日，Spring框架以interface21框架为基础，经过重新设计，发布了1.0正式版。</p>
<p>很难想象Rod Johnson的学历 , 他是悉尼大学的博士，然而他的专业不是计算机，而是音乐学。</p>
<p>Spring理念 : 使现有技术更加实用 . 本身就是一个大杂烩 , 整合现有的框架技术</p>
<p>官网 : <a href="http://spring.io/" target="_blank">http://spring.io/</a></p>
<p>官方下载地址 : <a href="https://repo.spring.io/libs-release-local/org/springframework/spring/" target="_blank">https://repo.spring.io/libs-release-local/org/springframework/spring/</a></p>
<p>GitHub : <a href="https://github.com/spring-projects" target="_blank">https://github.com/spring-projects</a></p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="12、优点" tid="tid-Z6mWcw" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>2</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">1.2、优点</span></b></h2></span>
<p>1、Spring是一个开源免费的框架 , 容器  .</p>
<p>2、Spring是一个轻量级的框架 , 非侵入式的 .</p>
<p><strong>3、控制反转 IoC  , 面向切面 Aop</strong></p>
<p>4、对事物的支持 , 对框架的支持</p>
<p>.......</p>
<p>一句话概括：</p>
<p><strong>Spring是一个轻量级的控制反转(IoC)和面向切面(AOP)的容器（框架）。</strong></p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="13、组成" tid="tid-pdEQtW" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>2</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">1.3、组成</span></b></h2></span>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FF6KnNia5YDhfatibrMvAUAhxgF27g4HdJsBGl6Fae9yQlUQJc9Bf8uftw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FF6KnNia5YDhfatibrMvAUAhxgF27g4HdJsBGl6Fae9yQlUQJc9Bf8uftw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p>Spring 框架是一个分层架构，由 7 个定义良好的模块组成。Spring 模块构建在核心容器之上，核心容器定义了创建、配置和管理 bean 的方式 .</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FFetRkkw19r7H3mHDibgs4RpRNHdG6CcIMdnxRCu2yYXNiano7ESCCMF0A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FFetRkkw19r7H3mHDibgs4RpRNHdG6CcIMdnxRCu2yYXNiano7ESCCMF0A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p>组成 Spring 框架的每个模块（或组件）都可以单独存在，或者与其他一个或多个模块联合实现。每个模块的功能如下：</p>
<ul>
<li><strong>核心容器</strong>：核心容器提供 Spring 框架的基本功能。核心容器的主要组件是 BeanFactory，它是工厂模式的实现。BeanFactory 使用<em>控制反转</em>（IOC） 模式将应用程序的配置和依赖性规范与实际的应用程序代码分开。</li>
<li><strong>Spring 上下文</strong>：Spring 上下文是一个配置文件，向 Spring 框架提供上下文信息。Spring 上下文包括企业服务，例如 JNDI、EJB、电子邮件、国际化、校验和调度功能。</li>
<li><strong>Spring AOP</strong>：通过配置管理特性，Spring AOP 模块直接将面向切面的编程功能 , 集成到了 Spring 框架中。所以，可以很容易地使 Spring 框架管理任何支持 AOP的对象。Spring AOP 模块为基于 Spring 的应用程序中的对象提供了事务管理服务。通过使用 Spring AOP，不用依赖组件，就可以将声明性事务管理集成到应用程序中。</li>
<li><strong>Spring DAO</strong>：JDBC DAO 抽象层提供了有意义的异常层次结构，可用该结构来管理异常处理和不同数据库供应商抛出的错误消息。异常层次结构简化了错误处理，并且极大地降低了需要编写的异常代码数量（例如打开和关闭连接）。Spring DAO 的面向 JDBC 的异常遵从通用的 DAO 异常层次结构。</li>
<li><strong>Spring ORM</strong>：Spring 框架插入了若干个 ORM 框架，从而提供了 ORM 的对象关系工具，其中包括 JDO、Hibernate 和 iBatis SQL Map。所有这些都遵从 Spring 的通用事务和 DAO 异常层次结构。</li>
<li><strong>Spring Web 模块</strong>：Web 上下文模块建立在应用程序上下文模块之上，为基于 Web 的应用程序提供了上下文。所以，Spring 框架支持与 Jakarta Struts 的集成。Web 模块还简化了处理多部分请求以及将请求参数绑定到域对象的工作。</li>
<li><strong>Spring MVC 框架</strong>：MVC 框架是一个全功能的构建 Web 应用程序的 MVC 实现。通过策略接口，MVC 框架变成为高度可配置的，MVC 容纳了大量视图技术，其中包括 JSP、Velocity、Tiles、iText 和 POI。</li>
</ul>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="14、拓展" tid="tid-d7JajK" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>2</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>4</i></b></span><b class="dev__developer"><span class="dev__title">1.4、拓展</span></b></h2></span>
<p><strong>Spring Boot与Spring Cloud</strong></p>
<ul>
<li>Spring Boot 是 Spring 的一套快速配置脚手架，可以基于Spring Boot 快速开发单个微服务;</li>
<li>Spring Cloud是基于Spring Boot实现的；</li>
<li>Spring Boot专注于快速、方便集成的单个微服务个体，Spring Cloud关注全局的服务治理框架；</li>
<li>Spring Boot使用了<strong>约束优于配置的理念</strong>，很多集成方案已经帮你选择好了，能不配置就不配置 , Spring Cloud很大的一部分是<strong>基于Spring Boot来实现</strong>，<strong>Spring Boot可以离开Spring Cloud独立使用开发项目</strong>，<strong>但是Spring Cloud离不开Spring Boot，属于依赖的关系</strong>。</li>
<li>SpringBoot在SpringClound中起到了承上启下的作用，如果你要学习SpringCloud必须要学习SpringBoot。</li>
</ul>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FFH5GFXM4YPUGrmA2JdpPic3FwYaI1JZHBZxibaUJVXWzzTFeCayk4XAIg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FFH5GFXM4YPUGrmA2JdpPic3FwYaI1JZHBZxibaUJVXWzzTFeCayk4XAIg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="2、ioc" tid="tid-KemM6n" class="header__dev"><span style=""><b class="dev__fe"><i>3</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">2、IOC</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="21、ioc基础" tid="tid-YNpKkx" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>3</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">2.1、IOC基础</span></b></h2></span>
<p>新建一个空白的maven项目</p>
<span title-type="h3" class="header__span" style="transform:scale(0.8);left: -73.60px;"><h3 id="2-11、分析实现" tid="tid-AN473C" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 32.00px;"></span><b class="dev__developer"><span class="dev__title">2 .1.1、分析实现</span></b></h3></span>
<p>我们先用我们原来的方式写一段代码 .</p>
<p>1、先写一个UserDao接口</p>
<code-box id="EWPJEA" style="position: relative;display: block;"><button code-id="EWPJEA" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-EWPJEA" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-EWPJEA" class="mCustomScrollbar _mCS_1 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_1" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_1_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-KnMrNz"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_1_scrollbar_vertical" class="mCSB_scrollTools mCSB_1_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_1_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_1_scrollbar_horizontal" class="mCSB_scrollTools mCSB_1_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_1_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、再去写Dao的实现类</p>
<code-box id="ZnPNHR" style="position: relative;display: block;"><button code-id="ZnPNHR" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-ZnPNHR" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-ZnPNHR" class="mCustomScrollbar _mCS_2 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_2" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_2_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-mxw85n"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"获取用户数据"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_2_scrollbar_vertical" class="mCSB_scrollTools mCSB_2_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_2_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_2_scrollbar_horizontal" class="mCSB_scrollTools mCSB_2_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_2_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、然后去写UserService的接口</p>
<code-box id="CCZ6RB" style="position: relative;display: block;"><button code-id="CCZ6RB" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-CCZ6RB" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-CCZ6RB" class="mCustomScrollbar _mCS_3 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_3" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_3_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-jdQGbR"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_3_scrollbar_vertical" class="mCSB_scrollTools mCSB_3_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_3_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_3_scrollbar_horizontal" class="mCSB_scrollTools mCSB_3_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_3_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>4、最后写Service的实现类</p>
<code-box id="3NmC4n" style="position: relative;display: block;"><button code-id="3NmC4n" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-3NmC4n" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-3NmC4n" class="mCustomScrollbar _mCS_4 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_4" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_4_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-fHsScz"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> UserDao userDao = <span class="hljs-keyword">new</span> UserDaoImpl();
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       userDao.getUser();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_4_scrollbar_vertical" class="mCSB_scrollTools mCSB_4_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_4_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_4_scrollbar_horizontal" class="mCSB_scrollTools mCSB_4_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_4_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>5、测试一下<code>(这里每次更换不同接口都需要在service层更改new的接口)</code></p>
<code-box id="niFiMA" style="position: relative;display: block;"><button code-id="niFiMA" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-niFiMA" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-niFiMA" class="mCustomScrollbar _mCS_5 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_5" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_5_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-wyQNGK"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   UserService service = <span class="hljs-keyword">new</span> UserServiceImpl();
<code-line class="line-numbers-rows"></code-line>   service.getUser();
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_5_scrollbar_vertical" class="mCSB_scrollTools mCSB_5_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_5_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_5_scrollbar_horizontal" class="mCSB_scrollTools mCSB_5_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_5_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>这是我们原来的方式 , 开始大家也都是这么去写的对吧 . 那我们现在修改一下 .</p>
<p>把Userdao的实现类增加一个 .</p>
<code-box id="E2ZTX8" style="position: relative;display: block;"><button code-id="E2ZTX8" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-E2ZTX8" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-E2ZTX8" class="mCustomScrollbar _mCS_6 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_6" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_6_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-6cP7Nc"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoMySqlImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"MySql获取用户数据"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_6_scrollbar_vertical" class="mCSB_scrollTools mCSB_6_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_6_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_6_scrollbar_horizontal" class="mCSB_scrollTools mCSB_6_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_6_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>紧接着我们要去使用MySql的话 , 我们就需要去service实现类里面修改对应的实现</p>
<code-box id="GChPK4" style="position: relative;display: block;"><button code-id="GChPK4" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-GChPK4" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-GChPK4" class="mCustomScrollbar _mCS_7 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_7" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_7_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-tyhwW4"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> UserDao userDao = <span class="hljs-keyword">new</span> UserDaoMySqlImpl();
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       userDao.getUser();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_7_scrollbar_vertical" class="mCSB_scrollTools mCSB_7_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_7_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_7_scrollbar_horizontal" class="mCSB_scrollTools mCSB_7_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_7_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>在假设, 我们再增加一个Userdao的实现类 .</p>
<code-box id="fdPd7G" style="position: relative;display: block;"><button code-id="fdPd7G" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-fdPd7G" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-fdPd7G" class="mCustomScrollbar _mCS_8 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_8" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_8_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-5xpcjK"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoOracleImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"Oracle获取用户数据"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_8_scrollbar_vertical" class="mCSB_scrollTools mCSB_8_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_8_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_8_scrollbar_horizontal" class="mCSB_scrollTools mCSB_8_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_8_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>那么我们要使用Oracle , 又需要去service实现类里面修改对应的实现 . 假设我们的这种需求非常大 , 这种方式就根本不适用了, 甚至反人类对吧 , 每次变动 , 都需要修改大量代码 . 这种设计的耦合性太高了, 牵一发而动全身 .</p>
<p><strong>那我们如何去解决呢 ?</strong></p>
<p>我们可以在需要用到他的地方 , 不去实现它 , 而是留出一个接口 , 利用set , 我们去代码里修改下 .</p>
<code-box id="t67c4R" style="position: relative;display: block;"><button code-id="t67c4R" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-t67c4R" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-t67c4R" class="mCustomScrollbar _mCS_9 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_9" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_9_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-nPtJzH"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> UserDao userDao;
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">// 利用set实现</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserDao</span><span class="hljs-params">(UserDao userDao)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.userDao = userDao;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">getUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       userDao.getUser();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_9_scrollbar_vertical" class="mCSB_scrollTools mCSB_9_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_9_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_9_scrollbar_horizontal" class="mCSB_scrollTools mCSB_9_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_9_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>现在去我们的测试类里 , 进行测试 ;<code>（有了set方法就可以在调用的时候由用户选择调用的接口）</code></p>
<code-box id="mXThCz" style="position: relative;display: block;"><button code-id="mXThCz" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-mXThCz" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-mXThCz" class="mCustomScrollbar _mCS_10 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_10" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_10_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-5DH76e"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   UserServiceImpl service = <span class="hljs-keyword">new</span> UserServiceImpl();
<code-line class="line-numbers-rows"></code-line>   service.setUserDao( <span class="hljs-keyword">new</span> UserDaoMySqlImpl() );
<code-line class="line-numbers-rows"></code-line>   service.getUser();
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//那我们现在又想用Oracle去实现呢</span>
<code-line class="line-numbers-rows"></code-line>   service.setUserDao( <span class="hljs-keyword">new</span> UserDaoOracleImpl() );
<code-line class="line-numbers-rows"></code-line>   service.getUser();
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_10_scrollbar_vertical" class="mCSB_scrollTools mCSB_10_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_10_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_10_scrollbar_horizontal" class="mCSB_scrollTools mCSB_10_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_10_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>大家发现了区别没有 ? 可能很多人说没啥区别 . 但是同学们 , 他们已经发生了根本性的变化 , 很多地方都不一样了 . 仔细去思考一下 , <strong>以前所有东西都是由程序去进行控制创建</strong> , <strong>而现在是由我们自行控制创建对象 , 把主动权交给了调用者</strong> . 程序不用去管怎么创建,怎么实现了 . 它只负责提供一个接口 .</p>
<p>这种思想 , 从本质上解决了问题 , 我们程序员不再去管理对象的创建了 , 更多的去关注业务的实现 . 耦合性大大降低 . 这也就是IOC的原型 !</p>
<span title-type="h3" class="header__span" style="transform:scale(0.8);left: -73.60px;"><h3 id="212ioc本质" tid="tid-RRAEki" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 32.00px;"></span><b class="dev__developer"><span class="dev__title">2.1.2IOC本质</span></b></h3></span>
<p><strong>控制反转IoC(Inversion of Control)，是一种设计思想，DI(依赖注入)是实现IoC的一种方法</strong>，也有人认为DI只是IoC的另一种说法。没有IoC的程序中 , 我们使用面向对象编程 , 对象的创建与对象间的依赖关系完全硬编码在程序中，对象的创建由程序自己控制，控制反转后将对象的创建转移给第三方，个人认为所谓控制反转就是：获得依赖对象的方式反转了。</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FFuYibmavlBHq9e4cDqiclpYSG8VT4EicVsnqKp65yJKQeNibsVdTiahQibJSg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FFuYibmavlBHq9e4cDqiclpYSG8VT4EicVsnqKp65yJKQeNibsVdTiahQibJSg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p><strong>IoC是Spring框架的核心内容</strong>，使用多种方式完美的实现了IoC，可以使用XML配置，也可以使用注解，新版本的Spring也可以零配置实现IoC。</p>
<p>Spring容器在初始化时先读取配置文件，根据配置文件或元数据创建与组织对象存入容器中，程序使用时再从Ioc容器中取出需要的对象。</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FF67dfeA6cRT7EiafNcibWyf57SGpkZ01JnpiaaicNB1ibBjGaicAvayKEWJ0A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7KtDiaOqFy5ourlJ8FTVV2FF67dfeA6cRT7EiafNcibWyf57SGpkZ01JnpiaaicNB1ibBjGaicAvayKEWJ0A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p>采用XML方式配置Bean的时候，Bean的定义信息是和实现分离的，而采用注解的方式可以把两者合为一体，Bean的定义信息直接以注解的形式定义在实现类中，从而达到了零配置的目的。</p>
<p><strong>控制反转是一种通过描述（XML或注解）并通过第三方去生产或获取特定对象的方式。在Spring中实现控制反转的是IoC容器，其实现方法是依赖注入（Dependency Injection,DI）。</strong></p>
<p>小狂神温馨提示</p>
<p>明白IOC的思想，是理解Spring的核心技巧</p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="3、hellospring" tid="tid-TmpNPH" class="header__dev"><span style=""><b class="dev__fe"><i>4</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">3、HelloSpring</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="31、导入jar包" tid="tid-CYpWmF" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>4</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">3.1、导入Jar包</span></b></h2></span>
<p>注 : spring 需要导入commons-logging进行日志记录 . 我们利用maven , 他会自动下载对应的依赖项 .</p>
<code-box id="Qn7hKM" style="position: relative;display: block;"><button code-id="Qn7hKM" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Qn7hKM" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Qn7hKM" class="mCustomScrollbar _mCS_11 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_11" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_11_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-e2aeEw"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.2.0.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_11_scrollbar_vertical" class="mCSB_scrollTools mCSB_11_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_11_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_11_scrollbar_horizontal" class="mCSB_scrollTools mCSB_11_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_11_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="32、编写代码" tid="tid-CekQsm" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>4</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">3.2、编写代码</span></b></h2></span>
<p>1、编写一个Hello实体类</p>
<code-box id="7X8MAD" style="position: relative;display: block;"><button code-id="7X8MAD" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-7X8MAD" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-7X8MAD" class="mCustomScrollbar _mCS_12 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_12" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_12_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-Rk36Xs"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hello</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> String name;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> name;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.name = name;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"Hello,"</span>+ name );
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_12_scrollbar_vertical" class="mCSB_scrollTools mCSB_12_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_12_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_12_scrollbar_horizontal" class="mCSB_scrollTools mCSB_12_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_12_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、编写我们的spring文件 , 这里我们命名为beans.xml</p>
<code-box id="6FhPsh" style="position: relative;display: block;"><button code-id="6FhPsh" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-6FhPsh" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-6FhPsh" class="mCustomScrollbar _mCS_13 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_13" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_13_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-Q67Y2P"><code-line class="line-numbers-rows"></code-line>&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;
<code-line class="line-numbers-rows"></code-line>&lt;beans xmlns=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
<code-line class="line-numbers-rows"></code-line>      xmlns:xsi=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
<code-line class="line-numbers-rows"></code-line>      xsi:schemaLocation=<span class="hljs-string">"http://www.springframework.org/schema/beans
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   &lt;!--bean就是java对象 , 由Spring创建和管理--&gt;
<code-line class="line-numbers-rows"></code-line>   &lt;bean id=<span class="hljs-string">"hello"</span> <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">"com.kuang.pojo.Hello"</span>&gt;
<code-line class="line-numbers-rows"></code-line>       &lt;property name=<span class="hljs-string">"name"</span> value=<span class="hljs-string">"Spring"</span>/&gt;
<code-line class="line-numbers-rows"></code-line>   &lt;/bean&gt;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>&lt;/beans&gt;
</code-pre></div></div><div id="mCSB_13_scrollbar_vertical" class="mCSB_scrollTools mCSB_13_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_13_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_13_scrollbar_horizontal" class="mCSB_scrollTools mCSB_13_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_13_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、我们可以去进行测试了 .</p>
<code-box id="eEAYFE" style="position: relative;display: block;"><button code-id="eEAYFE" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-eEAYFE" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-eEAYFE" class="mCustomScrollbar _mCS_14 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_14" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_14_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-ZyMKKi"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//解析beans.xml文件 , 生成管理相应的Bean对象</span>
<code-line class="line-numbers-rows"></code-line>   ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//getBean : 参数即为spring配置文件中bean的id .</span>
<code-line class="line-numbers-rows"></code-line>   Hello hello = (Hello) context.getBean(<span class="hljs-string">"hello"</span>);
<code-line class="line-numbers-rows"></code-line>   hello.show();
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_14_scrollbar_vertical" class="mCSB_scrollTools mCSB_14_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_14_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_14_scrollbar_horizontal" class="mCSB_scrollTools mCSB_14_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_14_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="33、思考" tid="tid-ckGAN3" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>4</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">3.3、思考</span></b></h2></span>
<ul>
<li>Hello 对象是谁创建的 ?  【hello 对象是由Spring创建的</li>
<li>Hello 对象的属性是怎么设置的 ?  hello 对象的属性是由Spring容器设置的</li>
</ul>
<p>这个过程就叫控制反转 :</p>
<ul>
<li>控制 : 谁来控制对象的创建 , 传统应用程序的对象是由程序本身控制创建的 , 使用Spring后 , 对象是由Spring来创建的</li>
<li>反转 : 程序本身不创建对象 , 而变成被动的接收对象 .</li>
</ul>
<p>依赖注入 : 就是利用set方法来进行注入的.</p>
<p>IOC是一种编程思想，由主动的编程变成被动的接收</p>
<p>可以通过newClassPathXmlApplicationContext去浏览一下底层源码 .</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="34、修改案例一" tid="tid-fKS22w" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>4</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>4</i></b></span><b class="dev__developer"><span class="dev__title">3.4、修改案例一</span></b></h2></span>
<p>我们在案例一中， 新增一个Spring配置文件beans.xml</p>
<code-box id="TPKytd" style="position: relative;display: block;"><button code-id="TPKytd" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-TPKytd" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-TPKytd" class="mCustomScrollbar _mCS_15 mCS-autoHide"><div id="mCSB_15" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_15_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 633px;" dir="ltr"><code-pre class="code-pre" id="pre-h6AYSP"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"MysqlImpl"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.dao.impl.UserDaoMySqlImpl"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"OracleImpl"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.dao.impl.UserDaoOracleImpl"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"ServiceImpl"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.service.impl.UserServiceImpl"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">&lt;!--注意: 这里的name并不是属性 , 而是set方法后面的那部分 , 首字母小写--&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">&lt;!--引用另外一个bean , 不是用value 而是用 ref--&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"userDao"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"OracleImpl"</span>/&gt;</span><span class="hljs-comment">&lt;!--具体使用哪个接口这里可以直接配置--&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code-pre></div></div><div id="mCSB_15_scrollbar_vertical" class="mCSB_scrollTools mCSB_15_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_15_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_15_scrollbar_horizontal" class="mCSB_scrollTools mCSB_15_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_15_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 625px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试！</p>
<code-box id="zP23m2" style="position: relative;display: block;"><button code-id="zP23m2" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-zP23m2" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-zP23m2" class="mCustomScrollbar _mCS_16 mCS-autoHide"><div id="mCSB_16" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_16_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 1354px;" dir="ltr"><code-pre class="code-pre" id="pre-3XcAd4"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>   UserServiceImpl serviceImpl = (UserServiceImpl) context.getBean(<span class="hljs-string">"ServiceImpl"</span>);<span class="hljs-comment">//这里相当于将原来的Service层也IOC了，不需要再在代码中写出调用哪个接口，只需要在配置文件中指明调用的接口即可。</span>
<code-line class="line-numbers-rows"></code-line>   serviceImpl.getUser();
<code-line class="line-numbers-rows"></code-line>    <span class="hljs-comment">//原来的步骤</span>
<code-line class="line-numbers-rows"></code-line>    <span class="hljs-comment">//UserService userService = new UserServiceImpl();</span>
<code-line class="line-numbers-rows"></code-line>    <span class="hljs-comment">//userService.setUserDao(new UserDaoMysqlImpl());//原先需要在代码中调用特定的方法</span>
<code-line class="line-numbers-rows"></code-line>	<span class="hljs-comment">//userService.getUser();</span>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_16_scrollbar_vertical" class="mCSB_scrollTools mCSB_16_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_16_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_16_scrollbar_horizontal" class="mCSB_scrollTools mCSB_16_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_16_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; display: block; width: 292px; max-width: 617px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>OK , 到了现在 , 我们彻底不用再程序中去改动了 , 要实现不同的操作 , 只需要在xml配置文件中进行修改 , 所谓的IoC,一句话搞定 : 对象由Spring 来创建 , 管理 , 装配 !</p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="4、ioc创建对象的方式" tid="tid-sSTnM4" class="header__dev"><span style=""><b class="dev__fe"><i>5</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">4、IOC创建对象的方式</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="41、通过无参构造方法来创建" tid="tid-pX4dbS" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>5</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">4.1、通过无参构造方法来创建</span></b></h2></span>
<p>1、User.java</p>
<code-box id="TyZdEY" style="position: relative;display: block;"><button code-id="TyZdEY" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-TyZdEY" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-TyZdEY" class="mCustomScrollbar _mCS_17 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_17" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_17_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-yhGA4Q"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> String name;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"user无参构造方法"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.name = name;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"name="</span>+ name );
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_17_scrollbar_vertical" class="mCSB_scrollTools mCSB_17_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_17_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_17_scrollbar_horizontal" class="mCSB_scrollTools mCSB_17_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_17_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、beans.xml</p>
<code-box id="6bJe2N" style="position: relative;display: block;"><button code-id="6bJe2N" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-6bJe2N" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-6bJe2N" class="mCustomScrollbar _mCS_18 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_18" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_18_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-JNSWAz"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.User"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"kuangshen"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code-pre></div></div><div id="mCSB_18_scrollbar_vertical" class="mCSB_scrollTools mCSB_18_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_18_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_18_scrollbar_horizontal" class="mCSB_scrollTools mCSB_18_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_18_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、测试类</p>
<code-box id="MSyR6Y" style="position: relative;display: block;"><button code-id="MSyR6Y" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-MSyR6Y" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-MSyR6Y" class="mCustomScrollbar _mCS_19 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_19" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_19_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-D3D573"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//在执行getBean的时候, user已经创建好了 , 通过无参构造</span>
<code-line class="line-numbers-rows"></code-line>   User user = (User) context.getBean(<span class="hljs-string">"user"</span>);
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//调用对象的方法 .</span>
<code-line class="line-numbers-rows"></code-line>   user.show();
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_19_scrollbar_vertical" class="mCSB_scrollTools mCSB_19_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_19_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_19_scrollbar_horizontal" class="mCSB_scrollTools mCSB_19_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_19_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>结果可以发现，在调用show方法之前，User对象已经通过无参构造初始化了！</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="42、通过有参构造方法来创建" tid="tid-Wn43xz" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>5</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">4.2、通过有参构造方法来创建</span></b></h2></span>
<p>1、UserT . java</p>
<code-box id="y8dedT" style="position: relative;display: block;"><button code-id="y8dedT" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-y8dedT" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-y8dedT" class="mCustomScrollbar _mCS_20 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_20" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_20_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-KbQrEZ"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserT</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> String name;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">UserT</span><span class="hljs-params">(String name)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.name = name;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.name = name;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"name="</span>+ name );
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_20_scrollbar_vertical" class="mCSB_scrollTools mCSB_20_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_20_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_20_scrollbar_horizontal" class="mCSB_scrollTools mCSB_20_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_20_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、beans.xml 有三种方式编写</p>
<code-box id="HX7iwh" style="position: relative;display: block;"><button code-id="HX7iwh" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-HX7iwh" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-HX7iwh" class="mCustomScrollbar _mCS_21 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_21" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_21_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-jm6pbi"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!-- 第一种根据index参数下标设置 --&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userT"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.UserT"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">&lt;!-- index指构造方法 , 下标从0开始 --&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"kuangshen2"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!-- 第二种根据参数名字设置 --&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userT"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.UserT"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">&lt;!-- name指参数名 --&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"kuangshen2"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!-- 第三种根据参数类型设置(不推荐使用) --&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userT"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.UserT"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"java.lang.String"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"kuangshen2"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_21_scrollbar_vertical" class="mCSB_scrollTools mCSB_21_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_21_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_21_scrollbar_horizontal" class="mCSB_scrollTools mCSB_21_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_21_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、测试</p>
<code-box id="JPMNAj" style="position: relative;display: block;"><button code-id="JPMNAj" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-JPMNAj" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-JPMNAj" class="mCustomScrollbar _mCS_22 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_22" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_22_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-EDDkXE"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testT</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>   UserT user = (UserT) context.getBean(<span class="hljs-string">"userT"</span>);
<code-line class="line-numbers-rows"></code-line>   user.show();
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_22_scrollbar_vertical" class="mCSB_scrollTools mCSB_22_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_22_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_22_scrollbar_horizontal" class="mCSB_scrollTools mCSB_22_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_22_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>结论：在配置文件加载的时候。其中管理的对象都已经初始化了！</p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="5、spring配置" tid="tid-BHn5Gj" class="header__dev"><span style=""><b class="dev__fe"><i>6</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">5、Spring配置</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="51、别名" tid="tid-yzbsCc" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>6</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">5.1、别名</span></b></h2></span>
<p>alias 设置别名 , 为bean设置别名 , 可以设置多个别名</p>
<code-box id="PB6hFs" style="position: relative;display: block;"><button code-id="PB6hFs" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-PB6hFs" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-PB6hFs" class="mCustomScrollbar _mCS_23 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_23" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_23_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-CMiQK8"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--设置别名：在获取Bean的时候可以使用别名获取--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">alias</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"userT"</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"userNew"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_23_scrollbar_vertical" class="mCSB_scrollTools mCSB_23_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_23_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_23_scrollbar_horizontal" class="mCSB_scrollTools mCSB_23_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_23_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="52、bean的配置" tid="tid-ZhCSCj" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>6</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">5.2、Bean的配置</span></b></h2></span>
<code-box id="5Dxdw8" style="position: relative;display: block;"><button code-id="5Dxdw8" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-5Dxdw8" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-5Dxdw8" class="mCustomScrollbar _mCS_24 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_24" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_24_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-a8SArM"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--bean就是java对象,由Spring创建和管理--&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--
<code-line class="line-numbers-rows"></code-line>   id 是bean的标识符,要唯一,如果没有配置id,name就是默认标识符
<code-line class="line-numbers-rows"></code-line>   如果配置id,又配置了name,那么name是别名
<code-line class="line-numbers-rows"></code-line>   name可以设置多个别名,可以用逗号,分号,空格隔开
<code-line class="line-numbers-rows"></code-line>   如果不配置id和name,可以根据applicationContext.getBean(.class)获取对象;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>class是bean的全限定名=包名+类名
<code-line class="line-numbers-rows"></code-line>--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"hello"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hello2 h2,h3;h4"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Hello"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Spring"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_24_scrollbar_vertical" class="mCSB_scrollTools mCSB_24_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_24_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_24_scrollbar_horizontal" class="mCSB_scrollTools mCSB_24_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_24_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="53、import" tid="tid-X2HHbA" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>6</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">5.3、import</span></b></h2></span>
<p>团队的合作通过import来实现 .</p>
<code-box id="mfXy2F" style="position: relative;display: block;"><button code-id="mfXy2F" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-mfXy2F" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-mfXy2F" class="mCustomScrollbar _mCS_25 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_25" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_25_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-DpEhcB"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"{path}/beans.xml"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_25_scrollbar_vertical" class="mCSB_scrollTools mCSB_25_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_25_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_25_scrollbar_horizontal" class="mCSB_scrollTools mCSB_25_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_25_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="6、di依赖注入" tid="tid-s3MXwM" class="header__dev"><span style=""><b class="dev__fe"><i>7</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">6、DI依赖注入</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="61、构造器注入" tid="tid-z3JY55" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>7</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">6.1、构造器注入</span></b></h2></span>
<p>4、已经说过</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="62、set方式注入【重点】" tid="tid-8jP3ph" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>7</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">6.2、set方式注入【重点】</span></b></h2></span>
<p>要求被注入的属性 , 必须有set方法 , set方法的方法名由set + 属性首字母大写 , 如果属性是boolean类型 , 没有set方法 , 是 is .</p>
<p>测试pojo类 :</p>
<p>Address.java</p>
<code-box id="CSN6DJ" style="position: relative;display: block;"><button code-id="CSN6DJ" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-CSN6DJ" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-CSN6DJ" class="mCustomScrollbar _mCS_26 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_26" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_26_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-PHKsQB"><code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Address</span> </span>{
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> String address;
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getAddress</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">return</span> address;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAddress</span><span class="hljs-params">(String address)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.address = address;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> }
</code-pre></div></div><div id="mCSB_26_scrollbar_vertical" class="mCSB_scrollTools mCSB_26_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_26_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_26_scrollbar_horizontal" class="mCSB_scrollTools mCSB_26_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_26_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>Student.java</p>
<code-box id="mPCy5N" style="position: relative;display: block;"><button code-id="mPCy5N" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-mPCy5N" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-mPCy5N" class="mCustomScrollbar _mCS_27 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_27" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_27_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-EzXHJ2"><code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">package</span> com.kuang.pojo;
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">import</span> java.util.List;
<code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">import</span> java.util.Map;
<code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">import</span> java.util.Properties;
<code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">import</span> java.util.Set;
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> </span>{
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> String name;
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> Address address;
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> String[] books;
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> List&lt;String&gt; hobbys;
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> Map&lt;String,String&gt; card;
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> Set&lt;String&gt; games;
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> String wife;
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> Properties info;
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.name = name;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAddress</span><span class="hljs-params">(Address address)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.address = address;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBooks</span><span class="hljs-params">(String[] books)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.books = books;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setHobbys</span><span class="hljs-params">(List&lt;String&gt; hobbys)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.hobbys = hobbys;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCard</span><span class="hljs-params">(Map&lt;String, String&gt; card)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.card = card;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setGames</span><span class="hljs-params">(Set&lt;String&gt; games)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.games = games;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setWife</span><span class="hljs-params">(String wife)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.wife = wife;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setInfo</span><span class="hljs-params">(Properties info)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.info = info;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>         System.out.println(<span class="hljs-string">"name="</span>+ name
<code-line class="line-numbers-rows"></code-line>                 + <span class="hljs-string">",address="</span>+ address.getAddress()
<code-line class="line-numbers-rows"></code-line>                 + <span class="hljs-string">",books="</span>
<code-line class="line-numbers-rows"></code-line>        );
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">for</span> (String book:books){
<code-line class="line-numbers-rows"></code-line>             System.out.print(<span class="hljs-string">"&lt;&lt;"</span>+book+<span class="hljs-string">"&gt;&gt;\t"</span>);
<code-line class="line-numbers-rows"></code-line>        }
<code-line class="line-numbers-rows"></code-line>         System.out.println(<span class="hljs-string">"\n爱好:"</span>+hobbys);
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>         System.out.println(<span class="hljs-string">"card:"</span>+card);
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>         System.out.println(<span class="hljs-string">"games:"</span>+games);
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>         System.out.println(<span class="hljs-string">"wife:"</span>+wife);
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>         System.out.println(<span class="hljs-string">"info:"</span>+info);
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> }
</code-pre></div></div><div id="mCSB_27_scrollbar_vertical" class="mCSB_scrollTools mCSB_27_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_27_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_27_scrollbar_horizontal" class="mCSB_scrollTools mCSB_27_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_27_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>1、<strong>常量注入</strong></p>
<code-box id="5BewZT" style="position: relative;display: block;"><button code-id="5BewZT" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-5BewZT" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-5BewZT" class="mCustomScrollbar _mCS_28 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_28" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_28_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-R3wWGp"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"student"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Student"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"小明"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_28_scrollbar_vertical" class="mCSB_scrollTools mCSB_28_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_28_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_28_scrollbar_horizontal" class="mCSB_scrollTools mCSB_28_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_28_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试：</p>
<code-box id="eCXPah" style="position: relative;display: block;"><button code-id="eCXPah" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-eCXPah" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-eCXPah" class="mCustomScrollbar _mCS_29 mCS-autoHide"><div id="mCSB_29" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_29_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 675px;" dir="ltr"><code-pre class="code-pre" id="pre-xndyXZ"><code-line class="line-numbers-rows"></code-line> <span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test01</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>     ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"applicationContext.xml"</span>);
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     Student student = (Student) context.getBean(<span class="hljs-string">"student"</span>);
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     System.out.println(student.getName());
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line> }
</code-pre></div></div><div id="mCSB_29_scrollbar_vertical" class="mCSB_scrollTools mCSB_29_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_29_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_29_scrollbar_horizontal" class="mCSB_scrollTools mCSB_29_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_29_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 586px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、<strong>Bean注入</strong></p>
<p>注意点：这里的值是一个引用，ref</p>
<code-box id="tbnZQX" style="position: relative;display: block;"><button code-id="tbnZQX" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-tbnZQX" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-tbnZQX" class="mCustomScrollbar _mCS_30 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_30" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_30_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-KH36M2"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"addr"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Address"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"address"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"重庆"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"student"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Student"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"小明"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"address"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"addr"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_30_scrollbar_vertical" class="mCSB_scrollTools mCSB_30_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_30_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_30_scrollbar_horizontal" class="mCSB_scrollTools mCSB_30_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_30_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、<strong>数组注入</strong></p>
<code-box id="8j2MAX" style="position: relative;display: block;"><button code-id="8j2MAX" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-8j2MAX" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-8j2MAX" class="mCustomScrollbar _mCS_31 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_31" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_31_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-HR4CZB"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"student"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Student"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"小明"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"address"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"addr"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"books"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>             <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>西游记<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>             <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>红楼梦<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>             <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>水浒传<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_31_scrollbar_vertical" class="mCSB_scrollTools mCSB_31_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_31_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_31_scrollbar_horizontal" class="mCSB_scrollTools mCSB_31_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_31_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>4、<strong>List注入</strong></p>
<code-box id="JQM5Ci" style="position: relative;display: block;"><button code-id="JQM5Ci" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-JQM5Ci" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-JQM5Ci" class="mCustomScrollbar _mCS_32 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_32" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_32_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-b6RY8W"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hobbys"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>听歌<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>看电影<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>爬山<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
</code-pre></div></div><div id="mCSB_32_scrollbar_vertical" class="mCSB_scrollTools mCSB_32_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_32_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_32_scrollbar_horizontal" class="mCSB_scrollTools mCSB_32_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_32_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>5、<strong>Map注入</strong></p>
<code-box id="JJxaxj" style="position: relative;display: block;"><button code-id="JJxaxj" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-JJxaxj" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-JJxaxj" class="mCustomScrollbar _mCS_33 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_33" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_33_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-ebyYXd"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"card"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"中国邮政"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"456456456465456"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"建设"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1456682255511"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
</code-pre></div></div><div id="mCSB_33_scrollbar_vertical" class="mCSB_scrollTools mCSB_33_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_33_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_33_scrollbar_horizontal" class="mCSB_scrollTools mCSB_33_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_33_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>6、<strong>set注入</strong></p>
<code-box id="tbWx5i" style="position: relative;display: block;"><button code-id="tbWx5i" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-tbWx5i" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-tbWx5i" class="mCustomScrollbar _mCS_34 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_34" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_34_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-AceMK2"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"games"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>LOL<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>BOB<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>COC<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
</code-pre></div></div><div id="mCSB_34_scrollbar_vertical" class="mCSB_scrollTools mCSB_34_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_34_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_34_scrollbar_horizontal" class="mCSB_scrollTools mCSB_34_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_34_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>7、<strong>Null注入</strong></p>
<code-box id="fKKTEY" style="position: relative;display: block;"><button code-id="fKKTEY" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-fKKTEY" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-fKKTEY" class="mCustomScrollbar _mCS_35 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_35" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_35_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-hEAKFY"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"wife"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">null</span>/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
</code-pre></div></div><div id="mCSB_35_scrollbar_vertical" class="mCSB_scrollTools mCSB_35_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_35_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_35_scrollbar_horizontal" class="mCSB_scrollTools mCSB_35_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_35_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>8、<strong>Properties注入</strong></p>
<code-box id="4bnKQN" style="position: relative;display: block;"><button code-id="4bnKQN" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-4bnKQN" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-4bnKQN" class="mCustomScrollbar _mCS_36 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_36" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_36_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-hTS3Rx"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"info"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"学号"</span>&gt;</span>20190604<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"性别"</span>&gt;</span>男<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"姓名"</span>&gt;</span>小明<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
</code-pre></div></div><div id="mCSB_36_scrollbar_vertical" class="mCSB_scrollTools mCSB_36_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_36_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_36_scrollbar_horizontal" class="mCSB_scrollTools mCSB_36_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_36_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试结果：</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7K5cyS8ZRTpajtSInicNHbMYGHEFnrCA8Jyr6ian5MWrUHtnKBpYYTTtysbp5UPYKQxSiaUHJibPKlicuQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7K5cyS8ZRTpajtSInicNHbMYGHEFnrCA8Jyr6ian5MWrUHtnKBpYYTTtysbp5UPYKQxSiaUHJibPKlicuQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="63、其他方式注入" tid="tid-6ZW4WD" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>7</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">6.3、其他方式注入</span></b></h2></span>
<span title-type="h3" class="header__span" style="transform:scale(0.8);left: -73.60px;"><h3 id="p命名空间注入" tid="tid-6ti48H" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 32.00px;"></span><b class="dev__developer"><span class="dev__title">p命名空间注入</span></b></h3></span>
<p>User.java ：【注意：这里没有有参构造器！】</p>
<code-box id="seeHac" style="position: relative;display: block;"><button code-id="seeHac" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-seeHac" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-seeHac" class="mCustomScrollbar _mCS_37 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_37" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_37_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-SPpXRb"><code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> String name;
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> age;
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.name = name;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setAge</span><span class="hljs-params">(<span class="hljs-keyword">int</span> age)</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">this</span>.age = age;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>     <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>         <span class="hljs-keyword">return</span> <span class="hljs-string">"User{"</span> +
<code-line class="line-numbers-rows"></code-line>                 <span class="hljs-string">"name='"</span> + name + <span class="hljs-string">'\''</span> +
<code-line class="line-numbers-rows"></code-line>                 <span class="hljs-string">", age="</span> + age +
<code-line class="line-numbers-rows"></code-line>                 <span class="hljs-string">'}'</span>;
<code-line class="line-numbers-rows"></code-line>    }
<code-line class="line-numbers-rows"></code-line> }
</code-pre></div></div><div id="mCSB_37_scrollbar_vertical" class="mCSB_scrollTools mCSB_37_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_37_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_37_scrollbar_horizontal" class="mCSB_scrollTools mCSB_37_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_37_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>1、P命名空间注入 : 需要在头文件中加入约束文件</p>
<code-box id="ESZTzf" style="position: relative;display: block;"><button code-id="ESZTzf" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-ESZTzf" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-ESZTzf" class="mCustomScrollbar _mCS_38 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_38" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_38_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-z43fZG"><code-line class="line-numbers-rows"></code-line> 导入约束 : xmlns:p="http://www.springframework.org/schema/p"
<code-line class="line-numbers-rows"></code-line> 
<code-line class="line-numbers-rows"></code-line> <span class="hljs-comment">&lt;!--P(属性: properties)命名空间 , 属性依然要设置set方法--&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.User"</span> <span class="hljs-attr">p:name</span>=<span class="hljs-string">"狂神"</span> <span class="hljs-attr">p:age</span>=<span class="hljs-string">"18"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_38_scrollbar_vertical" class="mCSB_scrollTools mCSB_38_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_38_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_38_scrollbar_horizontal" class="mCSB_scrollTools mCSB_38_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_38_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h3" class="header__span" style="transform:scale(0.8);left: -73.60px;"><h3 id="c命名空间注入" tid="tid-iAEXBW" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 32.00px;"></span><b class="dev__developer"><span class="dev__title">c命名空间注入</span></b></h3></span>
<p>2、c 命名空间注入 : 需要在头文件中加入约束文件</p>
<code-box id="6DcSKa" style="position: relative;display: block;"><button code-id="6DcSKa" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-6DcSKa" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-6DcSKa" class="mCustomScrollbar _mCS_39 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_39" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_39_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-mTbRpX"><code-line class="line-numbers-rows"></code-line> 导入约束 : xmlns:c="http://www.springframework.org/schema/c"
<code-line class="line-numbers-rows"></code-line> <span class="hljs-comment">&lt;!--C(构造: Constructor)命名空间 , 属性依然要设置set方法--&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.User"</span> <span class="hljs-attr">c:name</span>=<span class="hljs-string">"狂神"</span> <span class="hljs-attr">c:age</span>=<span class="hljs-string">"18"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_39_scrollbar_vertical" class="mCSB_scrollTools mCSB_39_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_39_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_39_scrollbar_horizontal" class="mCSB_scrollTools mCSB_39_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_39_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>发现问题：爆红了，刚才我们没有写有参构造！</p>
<p>解决：把有参构造器加上，这里也能知道，c 就是所谓的构造器注入！</p>
<p>测试代码：</p>
<code-box id="BdEYB6" style="position: relative;display: block;"><button code-id="BdEYB6" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-BdEYB6" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-BdEYB6" class="mCustomScrollbar _mCS_40 mCS-autoHide"><div id="mCSB_40" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_40_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 675px;" dir="ltr"><code-pre class="code-pre" id="pre-X3Gbb6"><code-line class="line-numbers-rows"></code-line> <span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test02</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>     ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"applicationContext.xml"</span>);
<code-line class="line-numbers-rows"></code-line>     User user = (User) context.getBean(<span class="hljs-string">"user"</span>);
<code-line class="line-numbers-rows"></code-line>     System.out.println(user);
<code-line class="line-numbers-rows"></code-line> }
</code-pre></div></div><div id="mCSB_40_scrollbar_vertical" class="mCSB_scrollTools mCSB_40_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_40_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_40_scrollbar_horizontal" class="mCSB_scrollTools mCSB_40_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_40_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 586px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="64、bean的作用域" tid="tid-Sfnxdw" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>7</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>4</i></b></span><b class="dev__developer"><span class="dev__title">6.4、Bean的作用域</span></b></h2></span>
<p>在Spring中，那些组成应用程序的主体及由Spring IoC容器所管理的对象，被称之为bean。简单地讲，<strong>bean就是由IoC容器初始化、装配及管理的对象 .</strong></p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7K5cyS8ZRTpajtSInicNHbMYfmmAQF8hrnicY49FRXEkR5xkxD5A4H5pVUia3mFhrDdh4gBt183EiaFaQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7K5cyS8ZRTpajtSInicNHbMYfmmAQF8hrnicY49FRXEkR5xkxD5A4H5pVUia3mFhrDdh4gBt183EiaFaQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p>几种作用域中，request、session作用域仅在基于web的应用中使用（不必关心你所采用的是什么web应用框架），只能用在基于web的Spring ApplicationContext环境。</p>
<span title-type="h4" class="header__span" style="transform:scale(0.7);left: -110.40px;"><h4 id="singleton" tid="tid-Gc5YHk" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 24.00px;"></span><b class="dev__developer"><span class="dev__title">Singleton</span></b></h4></span>
<p>当一个bean的作用域为Singleton，那么Spring IoC容器中只会存在一个共享的bean实例，并且所有对bean的请求，只要id与该bean定义相匹配，则只会返回bean的同一实例。Singleton是单例类型，就是在创建起容器时就同时自动创建了一个bean的对象，不管你是否使用，他都存在了，每次获取到的对象都是同一个对象。注意，Singleton作用域是Spring中的缺省作用域。要在XML中将bean定义成singleton，可以这样配置：</p>
<code-box id="GtTeyZ" style="position: relative;display: block;"><button code-id="GtTeyZ" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-GtTeyZ" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-GtTeyZ" class="mCustomScrollbar _mCS_41 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_41" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_41_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-w3h2WX"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"ServiceImpl"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cn.csdn.service.ServiceImpl"</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">"singleton"</span>&gt;</span>
</code-pre></div></div><div id="mCSB_41_scrollbar_vertical" class="mCSB_scrollTools mCSB_41_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_41_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_41_scrollbar_horizontal" class="mCSB_scrollTools mCSB_41_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_41_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>单例模式也就是只new一次对象，之后getBean的都直接获取第一次new的对象</p>
<p>测试：</p>
<code-box id="J2xn2Z" style="position: relative;display: block;"><button code-id="J2xn2Z" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-J2xn2Z" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-J2xn2Z" class="mCustomScrollbar _mCS_42 mCS-autoHide"><div id="mCSB_42" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_42_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 675px;" dir="ltr"><code-pre class="code-pre" id="pre-G2yN7b"><code-line class="line-numbers-rows"></code-line> <span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test03</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>     ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"applicationContext.xml"</span>);
<code-line class="line-numbers-rows"></code-line>     User user = (User) context.getBean(<span class="hljs-string">"user"</span>);
<code-line class="line-numbers-rows"></code-line>     User user2 = (User) context.getBean(<span class="hljs-string">"user2"</span>);<span class="hljs-comment">//第二次getBean</span>
<code-line class="line-numbers-rows"></code-line>     System.out.println(user==user2);
<code-line class="line-numbers-rows"></code-line> }
</code-pre></div></div><div id="mCSB_42_scrollbar_vertical" class="mCSB_scrollTools mCSB_42_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_42_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_42_scrollbar_horizontal" class="mCSB_scrollTools mCSB_42_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_42_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 586px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h4" class="header__span" style="transform:scale(0.7);left: -110.40px;"><h4 id="prototype" tid="tid-MRQ2ty" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 24.00px;"></span><b class="dev__developer"><span class="dev__title">Prototype</span></b></h4></span>
<p>当一个bean的作用域为Prototype，表示一个bean定义对应多个对象实例。Prototype作用域的bean会导致在每次对该bean请求（将其注入到另一个bean中，或者以程序的方式调用容器的getBean()方法）时都会创建一个新的bean实例。Prototype是原型类型，它在我们创建容器的时候并没有实例化，而是当我们获取bean的时候才会去创建一个对象，而且我们每次获取到的对象都不是同一个对象。根据经验，对有状态的bean应该使用prototype作用域，而对无状态的bean则应该使用singleton作用域。在XML中将bean定义成prototype，可以这样配置：</p>
<code-box id="KHMMwy" style="position: relative;display: block;"><button code-id="KHMMwy" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-KHMMwy" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-KHMMwy" class="mCustomScrollbar _mCS_43 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_43" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_43_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-xC56WG"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"account"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.foo.DefaultAccount"</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">"prototype"</span>/&gt;</span>  
<code-line class="line-numbers-rows"></code-line>  或者
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"account"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.foo.DefaultAccount"</span> <span class="hljs-attr">singleton</span>=<span class="hljs-string">"false"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_43_scrollbar_vertical" class="mCSB_scrollTools mCSB_43_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_43_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_43_scrollbar_horizontal" class="mCSB_scrollTools mCSB_43_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_43_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>原型模式也就是在之后的getBean时重新new一个对象</p>
<span title-type="h4" class="header__span" style="transform:scale(0.7);left: -110.40px;"><h4 id="request" tid="tid-EJk8xB" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 24.00px;"></span><b class="dev__developer"><span class="dev__title">Request</span></b></h4></span>
<p>当一个bean的作用域为Request，表示在一次HTTP请求中，一个bean定义对应一个实例；即每个HTTP请求都会有各自的bean实例，它们依据某个bean定义创建而成。该作用域仅在基于web的Spring ApplicationContext情形下有效。考虑下面bean定义：</p>
<code-box id="5wPREb" style="position: relative;display: block;"><button code-id="5wPREb" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-5wPREb" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-5wPREb" class="mCustomScrollbar _mCS_44 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_44" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_44_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-CGWpZF"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"loginAction"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">cn.csdn.LoginAction</span>" <span class="hljs-attr">scope</span>=<span class="hljs-string">"request"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_44_scrollbar_vertical" class="mCSB_scrollTools mCSB_44_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_44_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_44_scrollbar_horizontal" class="mCSB_scrollTools mCSB_44_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_44_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>针对每次HTTP请求，Spring容器会根据loginAction bean的定义创建一个全新的LoginAction bean实例，且该loginAction bean实例仅在当前HTTP request内有效，因此可以根据需要放心的更改所建实例的内部状态，而其他请求中根据loginAction bean定义创建的实例，将不会看到这些特定于某个请求的状态变化。当处理请求结束，request作用域的bean实例将被销毁。</p>
<span title-type="h4" class="header__span" style="transform:scale(0.7);left: -110.40px;"><h4 id="session" tid="tid-xDNME5" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 24.00px;"></span><b class="dev__developer"><span class="dev__title">Session</span></b></h4></span>
<p>当一个bean的作用域为Session，表示在一个HTTP Session中，一个bean定义对应一个实例。该作用域仅在基于web的Spring ApplicationContext情形下有效。考虑下面bean定义：</p>
<code-box id="TRMSx8" style="position: relative;display: block;"><button code-id="TRMSx8" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-TRMSx8" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-TRMSx8" class="mCustomScrollbar _mCS_45 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_45" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_45_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-Zwy7RR"><code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userPreferences"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.foo.UserPreferences"</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">"session"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_45_scrollbar_vertical" class="mCSB_scrollTools mCSB_45_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_45_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_45_scrollbar_horizontal" class="mCSB_scrollTools mCSB_45_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_45_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>针对某个HTTP Session，Spring容器会根据userPreferences bean定义创建一个全新的userPreferences bean实例，且该userPreferences bean仅在当前HTTP Session内有效。与request作用域一样，可以根据需要放心的更改所创建实例的内部状态，而别的HTTP Session中根据userPreferences创建的实例，将不会看到这些特定于某个HTTP Session的状态变化。当HTTP Session最终被废弃的时候，在该HTTP Session作用域内的bean也会被废弃掉。</p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="7、bean的自动装配" tid="tid-Tcz4ka" class="header__dev"><span style=""><b class="dev__fe"><i>8</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">7、Bean的自动装配</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="71、自动装配说明" tid="tid-tWpCKA" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>8</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">7.1、自动装配说明</span></b></h2></span>
<ul>
<li>自动装配是使用spring满足bean依赖的一种方法</li>
<li>spring会在应用上下文中为某个bean寻找其依赖的bean。</li>
</ul>
<p>Spring中bean有三种装配机制，分别是：</p>
<ol>
<li>在xml中显式配置；</li>
<li>在java中显式配置；</li>
<li>隐式的bean发现机制和自动装配。</li>
</ol>
<p>这里我们主要讲第三种：自动化的装配bean。</p>
<p>Spring的自动装配需要从两个角度来实现，或者说是两个操作：</p>
<ol>
<li>组件扫描(component scanning)：spring会自动发现应用上下文中所创建的bean；</li>
<li>自动装配(autowiring)：spring自动满足bean之间的依赖，也就是我们说的IoC/DI；</li>
</ol>
<p>组件扫描和自动装配组合发挥巨大威力，使得显示的配置降低到最少。</p>
<p><strong>推荐不使用自动装配xml配置 , 而使用注解 .</strong></p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="72、测试环境搭建" tid="tid-Cjt3QY" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>8</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">7.2、测试环境搭建</span></b></h2></span>
<p>1、新建一个项目</p>
<p>2、新建两个实体类，Cat  Dog  都有一个叫的方法</p>
<code-box id="mxh4DS" style="position: relative;display: block;"><button code-id="mxh4DS" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-mxh4DS" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-mxh4DS" class="mCustomScrollbar _mCS_46 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_46" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_46_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-extstt"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Cat</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shout</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"miao~"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shout</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"wang~"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_46_scrollbar_vertical" class="mCSB_scrollTools mCSB_46_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_46_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_46_scrollbar_horizontal" class="mCSB_scrollTools mCSB_46_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_46_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、新建一个用户类 User</p>
<code-box id="PwK7Zn" style="position: relative;display: block;"><button code-id="PwK7Zn" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-PwK7Zn" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-PwK7Zn" class="mCustomScrollbar _mCS_47 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_47" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_47_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-FxnedG"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Cat cat;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Dog dog;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> String str;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_47_scrollbar_vertical" class="mCSB_scrollTools mCSB_47_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_47_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_47_scrollbar_horizontal" class="mCSB_scrollTools mCSB_47_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_47_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>4、编写Spring配置文件</p>
<code-box id="QwMzBN" style="position: relative;display: block;"><button code-id="QwMzBN" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-QwMzBN" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-QwMzBN" class="mCustomScrollbar _mCS_48 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_48" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_48_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-k8cykH"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dog"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Dog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.User"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cat"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"cat"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dog"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"str"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"qinjiang"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code-pre></div></div><div id="mCSB_48_scrollbar_vertical" class="mCSB_scrollTools mCSB_48_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_48_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_48_scrollbar_horizontal" class="mCSB_scrollTools mCSB_48_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_48_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>5、测试</p>
<code-box id="pDAwSx" style="position: relative;display: block;"><button code-id="pDAwSx" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-pDAwSx" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-pDAwSx" class="mCustomScrollbar _mCS_49 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_49" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_49_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-cdApr3"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testMethodAutowire</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>       User user = (User) context.getBean(<span class="hljs-string">"user"</span>);
<code-line class="line-numbers-rows"></code-line>       user.getCat().shout();
<code-line class="line-numbers-rows"></code-line>       user.getDog().shout();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_49_scrollbar_vertical" class="mCSB_scrollTools mCSB_49_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_49_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_49_scrollbar_horizontal" class="mCSB_scrollTools mCSB_49_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_49_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>结果正常输出，环境OK</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="73、byname" tid="tid-pFmXt5" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>8</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">7.3、byName</span></b></h2></span>
<p><strong>autowire byName (按名称自动装配)</strong></p>
<p>由于在手动配置xml过程中，常常发生字母缺漏和大小写等错误，而无法对其进行检查，使得开发效率降低。</p>
<p>采用自动装配将避免这些错误，并且使配置简单化。</p>
<p>测试：</p>
<p>1、修改bean配置，增加一个属性  autowire="byName"</p>
<code-box id="BmSniK" style="position: relative;display: block;"><button code-id="BmSniK" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-BmSniK" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-BmSniK" class="mCustomScrollbar _mCS_50 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_50" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_50_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-RGMYE3"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.User"</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">"byName"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"str"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"qinjiang"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_50_scrollbar_vertical" class="mCSB_scrollTools mCSB_50_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_50_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_50_scrollbar_horizontal" class="mCSB_scrollTools mCSB_50_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_50_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、再次测试，结果依旧成功输出！</p>
<p>3、我们将 cat 的bean id修改为 catXXX</p>
<p>4、再次测试， 执行时报空指针java.lang.NullPointerException。因为按byName规则找不对应set方法，真正的setCat就没执行，对象就没有初始化，所以调用时就会报空指针错误。</p>
<p><strong>小结：</strong></p>
<p>当一个bean节点带有 autowire byName的属性时。</p>
<ol>
<li>将查找其类中所有的set方法名，例如setCat，获得将set去掉并且首字母小写的字符串，即cat。</li>
<li>去spring容器中寻找是否有此字符串名称id的对象。</li>
<li>如果有，就取出注入；如果没有，就报空指针异常。</li>
</ol>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="74、bytype" tid="tid-RN6DTx" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>8</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>4</i></b></span><b class="dev__developer"><span class="dev__title">7.4、byType</span></b></h2></span>
<p><strong>autowire byType (按类型自动装配)</strong></p>
<p>使用autowire byType首先需要保证：同一类型的对象，在spring容器中唯一。如果不唯一，会报不唯一的异常。</p>
<code-box id="7NW2P2" style="position: relative;display: block;"><button code-id="7NW2P2" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-7NW2P2" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-7NW2P2" class="mCustomScrollbar _mCS_51 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_51" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_51_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-RasZaK"><code-line class="line-numbers-rows"></code-line><span class="hljs-attribute">NoUniqueBeanDefinitionException</span>
</code-pre></div></div><div id="mCSB_51_scrollbar_vertical" class="mCSB_scrollTools mCSB_51_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_51_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_51_scrollbar_horizontal" class="mCSB_scrollTools mCSB_51_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_51_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试：</p>
<p>1、将user的bean配置修改一下 ： autowire="byType"</p>
<p>2、测试，正常输出</p>
<p>3、在注册一个cat 的bean对象！</p>
<code-box id="Hxf3hr" style="position: relative;display: block;"><button code-id="Hxf3hr" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Hxf3hr" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Hxf3hr" class="mCustomScrollbar _mCS_52 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_52" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_52_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-akktGk"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dog"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Dog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat2"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.User"</span> <span class="hljs-attr">autowire</span>=<span class="hljs-string">"byType"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"str"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"qinjiang"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_52_scrollbar_vertical" class="mCSB_scrollTools mCSB_52_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_52_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_52_scrollbar_horizontal" class="mCSB_scrollTools mCSB_52_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_52_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>4、测试，报错：NoUniqueBeanDefinitionException</p>
<p>5、删掉cat2，将cat的bean名称改掉！测试！因为是按类型装配，所以并不会报异常，也不影响最后的结果。甚至将id属性去掉，也不影响结果。</p>
<p>这就是按照类型自动装配！</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="75、使用注解实现自动装配" tid="tid-Bnwirw" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>8</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>5</i></b></span><b class="dev__developer"><span class="dev__title">7.5、使用注解实现自动装配</span></b></h2></span>
<p>jdk1.5开始支持注解，spring2.5开始全面支持注解。</p>
<p>准备工作：利用注解的方式注入属性。</p>
<p>1、在spring配置文件中引入context文件头</p>
<code-box id="j27D46" style="position: relative;display: block;"><button code-id="j27D46" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-j27D46" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-j27D46" class="mCustomScrollbar _mCS_53 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_53" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_53_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-NtmPa5"><code-line class="line-numbers-rows"></code-line>xmlns:context="http://www.springframework.org/schema/context"
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>http://www.springframework.org/schema/context
<code-line class="line-numbers-rows"></code-line>http://www.springframework.org/schema/context/spring-context.xsd
</code-pre></div></div><div id="mCSB_53_scrollbar_vertical" class="mCSB_scrollTools mCSB_53_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_53_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_53_scrollbar_horizontal" class="mCSB_scrollTools mCSB_53_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_53_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、开启属性注解支持！</p>
<code-box id="i2TCtB" style="position: relative;display: block;"><button code-id="i2TCtB" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-i2TCtB" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-i2TCtB" class="mCustomScrollbar _mCS_54 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_54" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_54_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-8CPdhz"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_54_scrollbar_vertical" class="mCSB_scrollTools mCSB_54_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_54_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_54_scrollbar_horizontal" class="mCSB_scrollTools mCSB_54_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_54_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h4" class="header__span" style="transform:scale(0.7);left: -110.40px;"><h4 id="autowired" tid="tid-6SCFPF" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 24.00px;"></span><b class="dev__developer"><span class="dev__title">@Autowired</span></b></h4></span>
<ul>
<li>@Autowired是按类型自动转配的，不支持id匹配。</li>
<li>需要导入 spring-aop的包！</li>
</ul>
<p>测试：</p>
<p>1、将User类中的set方法去掉，使用@Autowired注解</p>
<code-box id="R65TYR" style="position: relative;display: block;"><button code-id="R65TYR" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-R65TYR" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-R65TYR" class="mCustomScrollbar _mCS_55 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_55" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_55_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-4m8J6e"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Autowired</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Cat cat;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Autowired</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Dog dog;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> String str;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> Cat <span class="hljs-title">getCat</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> cat;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> Dog <span class="hljs-title">getDog</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> dog;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getStr</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> str;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_55_scrollbar_vertical" class="mCSB_scrollTools mCSB_55_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_55_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_55_scrollbar_horizontal" class="mCSB_scrollTools mCSB_55_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_55_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、此时配置文件内容</p>
<code-box id="EFpZJ6" style="position: relative;display: block;"><button code-id="EFpZJ6" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-EFpZJ6" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-EFpZJ6" class="mCustomScrollbar _mCS_56 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_56" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_56_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-cfDhpr"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dog"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Dog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.User"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_56_scrollbar_vertical" class="mCSB_scrollTools mCSB_56_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_56_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_56_scrollbar_horizontal" class="mCSB_scrollTools mCSB_56_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_56_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、测试，成功输出结果！</p>
<p>【小狂神科普时间】</p>
<p>@Autowired(required=false)  说明：false，对象可以为null；true，对象必须存对象，不能为null。</p>
<code-box id="4a4CpJ" style="position: relative;display: block;"><button code-id="4a4CpJ" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-4a4CpJ" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-4a4CpJ" class="mCustomScrollbar _mCS_57 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_57" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_57_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-CmMKNS"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//如果允许对象为null，设置required = false,默认为true</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Autowired(required = false)</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">private</span> Cat cat;
</code-pre></div></div><div id="mCSB_57_scrollbar_vertical" class="mCSB_scrollTools mCSB_57_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_57_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_57_scrollbar_horizontal" class="mCSB_scrollTools mCSB_57_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_57_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h4" class="header__span" style="transform:scale(0.7);left: -110.40px;"><h4 id="qualifier" tid="tid-tYthyS" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 24.00px;"></span><b class="dev__developer"><span class="dev__title">@Qualifier</span></b></h4></span>
<ul>
<li>@Autowired是根据类型自动装配的，加上@Qualifier则可以根据byName的方式自动装配</li>
<li>@Qualifier不能单独使用。</li>
</ul>
<p>测试实验步骤：</p>
<p>1、配置文件修改内容，保证类型存在对象。且名字不为类的默认名字！</p>
<code-box id="pFeZP4" style="position: relative;display: block;"><button code-id="pFeZP4" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-pFeZP4" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-pFeZP4" class="mCustomScrollbar _mCS_58 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_58" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_58_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-R5h2Ws"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dog1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Dog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dog2"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Dog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat2"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_58_scrollbar_vertical" class="mCSB_scrollTools mCSB_58_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_58_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_58_scrollbar_horizontal" class="mCSB_scrollTools mCSB_58_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_58_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、没有加Qualifier测试，直接报错</p>
<p>3、在属性上添加Qualifier注解</p>
<code-box id="bdrPRN" style="position: relative;display: block;"><button code-id="bdrPRN" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-bdrPRN" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-bdrPRN" class="mCustomScrollbar _mCS_59 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_59" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_59_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-AJacMj"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Autowired</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Qualifier(value = "cat2")</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">private</span> Cat cat;
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Autowired</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Qualifier(value = "dog2")</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">private</span> Dog dog;
</code-pre></div></div><div id="mCSB_59_scrollbar_vertical" class="mCSB_scrollTools mCSB_59_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_59_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_59_scrollbar_horizontal" class="mCSB_scrollTools mCSB_59_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_59_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试，成功输出！</p>
<span title-type="h4" class="header__span" style="transform:scale(0.7);left: -110.40px;"><h4 id="resource" tid="tid-mNYCm2" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 24.00px;"></span><b class="dev__developer"><span class="dev__title">@Resource</span></b></h4></span>
<ul>
<li>@Resource如有指定的name属性，先按该属性进行byName方式查找装配；</li>
<li>其次再进行默认的byName方式进行装配；</li>
<li>如果以上都不成功，则按byType的方式自动装配。</li>
<li>都不成功，则报异常。</li>
</ul>
<p>实体类：</p>
<code-box id="FCHXMa" style="position: relative;display: block;"><button code-id="FCHXMa" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-FCHXMa" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-FCHXMa" class="mCustomScrollbar _mCS_60 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_60" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_60_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-m4ZMEb"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//如果允许对象为null，设置required = false,默认为true</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Resource(name = "cat2")</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Cat cat;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Resource</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Dog dog;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> String str;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_60_scrollbar_vertical" class="mCSB_scrollTools mCSB_60_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_60_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_60_scrollbar_horizontal" class="mCSB_scrollTools mCSB_60_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_60_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>beans.xml</p>
<code-box id="dyh7er" style="position: relative;display: block;"><button code-id="dyh7er" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-dyh7er" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-dyh7er" class="mCustomScrollbar _mCS_61 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_61" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_61_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-xcZrjC"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dog"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Dog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat2"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.User"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_61_scrollbar_vertical" class="mCSB_scrollTools mCSB_61_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_61_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_61_scrollbar_horizontal" class="mCSB_scrollTools mCSB_61_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_61_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试：结果OK</p>
<p>配置文件2：beans.xml ， 删掉cat2</p>
<code-box id="afZ3E6" style="position: relative;display: block;"><button code-id="afZ3E6" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-afZ3E6" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-afZ3E6" class="mCustomScrollbar _mCS_62 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_62" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_62_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-pGz5ty"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dog"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Dog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cat1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.pojo.Cat"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_62_scrollbar_vertical" class="mCSB_scrollTools mCSB_62_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_62_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_62_scrollbar_horizontal" class="mCSB_scrollTools mCSB_62_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_62_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>实体类上只保留注解</p>
<code-box id="43imNF" style="position: relative;display: block;"><button code-id="43imNF" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-43imNF" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-43imNF" class="mCustomScrollbar _mCS_63 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_63" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_63_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-FpZ87D"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Resource</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">private</span> Cat cat;
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Resource</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">private</span> Dog dog;
</code-pre></div></div><div id="mCSB_63_scrollbar_vertical" class="mCSB_scrollTools mCSB_63_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_63_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_63_scrollbar_horizontal" class="mCSB_scrollTools mCSB_63_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_63_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>结果：OK</p>
<p>结论：先进行byName查找，失败；再进行byType查找，成功。</p>
<span title-type="h3" class="header__span" style="transform:scale(0.8);left: -73.60px;"><h3 id="小结" tid="tid-hJszz5" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 32.00px;"></span><b class="dev__developer"><span class="dev__title">小结</span></b></h3></span>
<p>@Autowired与@Resource异同：</p>
<p>1、@Autowired与@Resource都可以用来装配bean。都可以写在字段上，或写在setter方法上。</p>
<p>2、@Autowired默认<strong>按类型装配</strong>（属于spring规范），默认情况下必须要求依赖对象必须存在，如果要允许null 值，可以设置它的required属性为false，如：@Autowired(required=false) ，如果我们想使用名称装配可以结合@Qualifier注解进行使用</p>
<p>3、@Resource（属于J2EE复返），默认<strong>按照名称进行装配</strong>，名称可以通过name属性进行指定。如果没有指定name属性，当注解写在字段上时，默认取字段名进行按照名称查找，如果注解写在setter方法上默认取属性名进行装配。当找不到与名称匹配的bean时才按照类型进行装配。但是需要注意的是，如果name属性一旦指定，就只会按照名称进行装配。</p>
<p>它们的作用相同都是用注解方式注入对象，但执行顺序不同。@Autowired先byType，@Resource先byName。</p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="8、使用注解开发" tid="tid-65X782" class="header__dev"><span style=""><b class="dev__fe"><i>9</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">8、使用注解开发</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="81、说明" tid="tid-Zec85z" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>9</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">8.1、说明</span></b></h2></span>
<p>在spring4之后，想要使用注解形式，必须得要引入aop的包</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7IzypAUHDfDEujP4ry6cHxWTvAS6qRS0qrmMCic3QqF9icGNcPj8IZwNo3R9VEgpAgWHrStBN1ya6Tg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7IzypAUHDfDEujP4ry6cHxWTvAS6qRS0qrmMCic3QqF9icGNcPj8IZwNo3R9VEgpAgWHrStBN1ya6Tg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p>在配置文件当中，还得要引入一个context约束</p>
<code-box id="zkfEnf" style="position: relative;display: block;"><button code-id="zkfEnf" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-zkfEnf" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-zkfEnf" class="mCustomScrollbar _mCS_64 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_64" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_64_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-B5d47i"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/beans/spring-beans.xsd
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/context
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code-pre></div></div><div id="mCSB_64_scrollbar_vertical" class="mCSB_scrollTools mCSB_64_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_64_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_64_scrollbar_horizontal" class="mCSB_scrollTools mCSB_64_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_64_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="82、bean的实现" tid="tid-hcCjim" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>9</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">8.2、Bean的实现</span></b></h2></span>
<p>我们之前都是使用 bean 的标签进行bean注入，但是实际开发中，我们一般都会使用注解！</p>
<p>1、配置扫描哪些包下的注解</p>
<code-box id="88eCdw" style="position: relative;display: block;"><button code-id="88eCdw" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-88eCdw" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-88eCdw" class="mCustomScrollbar _mCS_65 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_65" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_65_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-42i8Rj"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--指定注解扫描包--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.kuang.pojo"</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_65_scrollbar_vertical" class="mCSB_scrollTools mCSB_65_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_65_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_65_scrollbar_horizontal" class="mCSB_scrollTools mCSB_65_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_65_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、在指定包下编写类，增加注解</p>
<code-box id="7pAt8Z" style="position: relative;display: block;"><button code-id="7pAt8Z" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-7pAt8Z" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-7pAt8Z" class="mCustomScrollbar _mCS_66 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_66" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_66_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-4xKwSA"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Component("user")</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">// 相当于配置文件中 &lt;bean id="user" class="当前注解的类"/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">public</span> String name = <span class="hljs-string">"秦疆"</span>;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_66_scrollbar_vertical" class="mCSB_scrollTools mCSB_66_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_66_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_66_scrollbar_horizontal" class="mCSB_scrollTools mCSB_66_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_66_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、测试</p>
<code-box id="bCEMtk" style="position: relative;display: block;"><button code-id="bCEMtk" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-bCEMtk" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-bCEMtk" class="mCustomScrollbar _mCS_67 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_67" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_67_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-dPjfay"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   ApplicationContext applicationContext =
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>   User user = (User) applicationContext.getBean(<span class="hljs-string">"user"</span>);
<code-line class="line-numbers-rows"></code-line>   System.out.println(user.name);
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_67_scrollbar_vertical" class="mCSB_scrollTools mCSB_67_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_67_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_67_scrollbar_horizontal" class="mCSB_scrollTools mCSB_67_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_67_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="83、属性注入" tid="tid-xHafse" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>9</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">8.3、属性注入</span></b></h2></span>
<p>使用注解注入属性</p>
<p>1、可以不用提供set方法，直接在直接名上添加@value("值")</p>
<code-box id="Bix2c3" style="position: relative;display: block;"><button code-id="Bix2c3" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Bix2c3" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Bix2c3" class="mCustomScrollbar _mCS_68 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_68" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_68_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-Gk72D4"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Component("user")</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">// 相当于配置文件中 &lt;bean id="user" class="当前注解的类"/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Value("秦疆")</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">// 相当于配置文件中 &lt;property name="name" value="秦疆"/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">public</span> String name;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_68_scrollbar_vertical" class="mCSB_scrollTools mCSB_68_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_68_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_68_scrollbar_horizontal" class="mCSB_scrollTools mCSB_68_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_68_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、如果提供了set方法，在set方法上添加@value("值");</p>
<code-box id="crA8Rj" style="position: relative;display: block;"><button code-id="crA8Rj" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-crA8Rj" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-crA8Rj" class="mCustomScrollbar _mCS_69 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_69" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_69_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-edaCHf"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Component("user")</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">public</span> String name;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Value("秦疆")</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.name = name;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_69_scrollbar_vertical" class="mCSB_scrollTools mCSB_69_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_69_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_69_scrollbar_horizontal" class="mCSB_scrollTools mCSB_69_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_69_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="84、衍生注解" tid="tid-jcBpct" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>9</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>4</i></b></span><b class="dev__developer"><span class="dev__title">8.4、衍生注解</span></b></h2></span>
<p>我们这些注解，就是替代了在配置文件当中配置步骤而已！更加的方便快捷！</p>
<p><strong>@Component三个衍生注解</strong></p>
<p>为了更好的进行分层，Spring可以使用其它三个注解，功能一样，目前使用哪一个功能都一样。</p>
<ul>
<li>@Controller：web层</li>
<li>@Service：service层</li>
<li>@Repository：dao层</li>
</ul>
<p>写上这些注解，就相当于将这个类交给Spring管理装配了！</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="85、自动装配注解" tid="tid-jiaypZ" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>9</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>5</i></b></span><b class="dev__developer"><span class="dev__title">8.5、自动装配注解</span></b></h2></span>
<p>在Bean的自动装配已经讲过了，可以回顾！</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="86、作用域" tid="tid-aPA8za" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>9</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>6</i></b></span><b class="dev__developer"><span class="dev__title">8.6、作用域</span></b></h2></span>
<p>@scope</p>
<ul>
<li>singleton：默认的，Spring会采用单例模式创建这个对象。关闭工厂 ，所有的对象都会销毁。</li>
<li>prototype：多例模式。关闭工厂 ，所有的对象不会销毁。内部的垃圾回收机制会回收</li>
</ul>
<code-box id="77W8tz" style="position: relative;display: block;"><button code-id="77W8tz" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-77W8tz" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-77W8tz" class="mCustomScrollbar _mCS_70 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_70" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_70_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-yPZ5c7"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Controller("user")</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Scope("prototype")</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Value("秦疆")</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">public</span> String name;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_70_scrollbar_vertical" class="mCSB_scrollTools mCSB_70_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_70_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_70_scrollbar_horizontal" class="mCSB_scrollTools mCSB_70_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_70_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="87、小结" tid="tid-Mj4CmE" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>9</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>7</i></b></span><b class="dev__developer"><span class="dev__title">8.7、小结</span></b></h2></span>
<p><strong>XML与注解比较</strong></p>
<ul>
<li>XML可以适用任何场景 ，结构清晰，维护方便</li>
<li>注解不是自己提供的类使用不了，开发简单方便</li>
</ul>
<p><strong>xml与注解整合开发</strong> ：推荐最佳实践</p>
<ul>
<li>xml管理Bean</li>
<li>注解完成属性注入</li>
<li>使用过程中， 可以不用扫描，扫描是为了类上的注解</li>
</ul>
<code-box id="ef2emH" style="position: relative;display: block;"><button code-id="ef2emH" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-ef2emH" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-ef2emH" class="mCustomScrollbar _mCS_71 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_71" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_71_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-QSWmeK"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>  
</code-pre></div></div><div id="mCSB_71_scrollbar_vertical" class="mCSB_scrollTools mCSB_71_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_71_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_71_scrollbar_horizontal" class="mCSB_scrollTools mCSB_71_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_71_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>作用：</p>
<ul>
<li>进行注解驱动注册，从而使注解生效</li>
<li>用于激活那些已经在spring容器里注册过的bean上面的注解，也就是显示的向Spring注册</li>
<li>如果不扫描包，就需要手动配置bean</li>
<li>如果不加注解驱动，则注入的值为null！</li>
</ul>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="9、使用java的方式配置spring" tid="tid-P5QT24" class="header__dev"><span style=""><b class="dev__fe"><i>10</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">9、使用Java的方式配置Spring</span></b></h1></span>
<p>完全不使用xml配置</p>
<p>JavaConfig 原来是 Spring 的一个子项目，它通过 Java 类的方式提供 Bean 的定义信息，在 Spring4 的版本， JavaConfig 已正式成为 Spring4 的核心功能 。</p>
<p>测试：</p>
<p>1、编写一个实体类，Dog</p>
<code-box id="tpN4pb" style="position: relative;display: block;"><button code-id="tpN4pb" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-tpN4pb" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-tpN4pb" class="mCustomScrollbar _mCS_72 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_72" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_72_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-whwJ5m"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Component</span>  <span class="hljs-comment">//将这个类标注为Spring的一个组件，放到容器中！</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">public</span> String name = <span class="hljs-string">"dog"</span>;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_72_scrollbar_vertical" class="mCSB_scrollTools mCSB_72_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_72_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_72_scrollbar_horizontal" class="mCSB_scrollTools mCSB_72_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_72_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、新建一个config配置包，编写一个MyConfig配置类</p>
<code-box id="86rE8K" style="position: relative;display: block;"><button code-id="86rE8K" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-86rE8K" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-86rE8K" class="mCustomScrollbar _mCS_73 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_73" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_73_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-p8rwc6"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Configuration</span>  <span class="hljs-comment">//代表这是一个配置类</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfig</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Bean</span> <span class="hljs-comment">//通过方法注册一个bean，这里的返回值就Bean的类型，方法名就是bean的id！</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> Dog <span class="hljs-title">dog</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Dog();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_73_scrollbar_vertical" class="mCSB_scrollTools mCSB_73_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_73_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_73_scrollbar_horizontal" class="mCSB_scrollTools mCSB_73_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_73_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、测试</p>
<code-box id="FXijHP" style="position: relative;display: block;"><button code-id="FXijHP" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-FXijHP" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-FXijHP" class="mCustomScrollbar _mCS_74 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_74" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_74_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-jMpGdH"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   ApplicationContext applicationContext =
<code-line class="line-numbers-rows"></code-line>           <span class="hljs-keyword">new</span> AnnotationConfigApplicationContext(MyConfig.class);
<code-line class="line-numbers-rows"></code-line>   Dog dog = (Dog) applicationContext.getBean(<span class="hljs-string">"dog"</span>);
<code-line class="line-numbers-rows"></code-line>   System.out.println(dog.name);
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_74_scrollbar_vertical" class="mCSB_scrollTools mCSB_74_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_74_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_74_scrollbar_horizontal" class="mCSB_scrollTools mCSB_74_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_74_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>4、成功输出结果！</p>
<p><strong>导入其他配置如何做呢？</strong></p>
<p>1、我们再编写一个配置类！</p>
<code-box id="zpxwAz" style="position: relative;display: block;"><button code-id="zpxwAz" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-zpxwAz" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-zpxwAz" class="mCustomScrollbar _mCS_75 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_75" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_75_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-fKcxf6"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Configuration</span>  <span class="hljs-comment">//代表这是一个配置类</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfig2</span> </span>{
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_75_scrollbar_vertical" class="mCSB_scrollTools mCSB_75_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_75_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_75_scrollbar_horizontal" class="mCSB_scrollTools mCSB_75_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_75_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、在之前的配置类中我们来选择导入这个配置类</p>
<code-box id="Ym4pNQ" style="position: relative;display: block;"><button code-id="Ym4pNQ" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Ym4pNQ" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Ym4pNQ" class="mCustomScrollbar _mCS_76 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_76" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_76_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-YmxiKk"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Configuration</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Import(MyConfig2.class)</span>  <span class="hljs-comment">//导入合并其他配置类，类似于配置文件中的 inculde 标签</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyConfig</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Bean</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> Dog <span class="hljs-title">dog</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Dog();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_76_scrollbar_vertical" class="mCSB_scrollTools mCSB_76_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_76_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_76_scrollbar_horizontal" class="mCSB_scrollTools mCSB_76_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_76_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>关于这种Java类的配置方式，我们在之后的SpringBoot 和 SpringCloud中还会大量看到，我们需要知道这些注解的作用即可！</p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="10、代理模式" tid="tid-RN26Qc" class="header__dev"><span style=""><b class="dev__fe"><i>11</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">10、代理模式</span></b></h1></span>
<p>为什么要学习代理模式，因为AOP的底层机制就是动态代理！【SpringAOP和SpringMVC】</p>
<p>代理模式：</p>
<ul>
<li>静态代理</li>
<li>动态代理</li>
</ul>
<p>学习aop之前 , 我们要先了解一下代理模式！</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLRnfS7LpO0Iic7fEEPFCgRs0ggNXCwf6IKo1tibjPmNSTEYeII5ro7YLQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLRnfS7LpO0Iic7fEEPFCgRs0ggNXCwf6IKo1tibjPmNSTEYeII5ro7YLQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="101、静态代理" tid="tid-hePpSH" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>11</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">10.1、静态代理</span></b></h2></span>
<p><strong>静态代理角色分析</strong></p>
<ul>
<li>
<p>抽象角色 : 一般使用接口或者抽象类来实现</p>
</li>
<li>
<p>真实角色 : 被代理的角色</p>
</li>
<li>
<p>代理角色 : 代理真实角色 ; 代理真实角色后 , 一般会做一些附属的操作 .</p>
</li>
<li>
<p>客户  :  使用代理角色来进行一些操作 .</p>
</li>
</ul>
<p><strong>代码实现</strong></p>
<p>Rent . java 即抽象角色</p>
<code-box id="wEBD3i" style="position: relative;display: block;"><button code-id="wEBD3i" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-wEBD3i" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-wEBD3i" class="mCustomScrollbar _mCS_77 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_77" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_77_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-sRDNZb"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//抽象角色：租房</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Rent</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_77_scrollbar_vertical" class="mCSB_scrollTools mCSB_77_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_77_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_77_scrollbar_horizontal" class="mCSB_scrollTools mCSB_77_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_77_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>Host . java 即真实角色</p>
<code-box id="wcay5X" style="position: relative;display: block;"><button code-id="wcay5X" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-wcay5X" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-wcay5X" class="mCustomScrollbar _mCS_78 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_78" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_78_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-A8znsP"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//真实角色: 房东，房东要出租房子</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Host</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Rent</span></span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"房屋出租"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_78_scrollbar_vertical" class="mCSB_scrollTools mCSB_78_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_78_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_78_scrollbar_horizontal" class="mCSB_scrollTools mCSB_78_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_78_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>Proxy . java 即代理角色</p>
<code-box id="pTTSZh" style="position: relative;display: block;"><button code-id="pTTSZh" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-pTTSZh" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-pTTSZh" class="mCustomScrollbar _mCS_79 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_79" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_79_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-kkpWYW"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//代理角色：中介</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Proxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Rent</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Host host;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Proxy</span><span class="hljs-params">()</span> </span>{ }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Proxy</span><span class="hljs-params">(Host host)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.host = host;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//租房</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       seeHouse();
<code-line class="line-numbers-rows"></code-line>       host.rent();
<code-line class="line-numbers-rows"></code-line>       fare();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//看房</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">seeHouse</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"带房客看房"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//收中介费</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fare</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"收中介费"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_79_scrollbar_vertical" class="mCSB_scrollTools mCSB_79_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_79_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_79_scrollbar_horizontal" class="mCSB_scrollTools mCSB_79_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_79_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>Client . java 即客户</p>
<code-box id="Qx6QJW" style="position: relative;display: block;"><button code-id="Qx6QJW" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Qx6QJW" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Qx6QJW" class="mCustomScrollbar _mCS_80 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_80" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_80_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-hCdswT"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//客户类，一般客户都会去找代理！</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//房东要租房</span>
<code-line class="line-numbers-rows"></code-line>       Host host = <span class="hljs-keyword">new</span> Host();
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//中介帮助房东</span>
<code-line class="line-numbers-rows"></code-line>       Proxy proxy = <span class="hljs-keyword">new</span> Proxy(host);
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//你去找中介！</span>
<code-line class="line-numbers-rows"></code-line>       proxy.rent();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_80_scrollbar_vertical" class="mCSB_scrollTools mCSB_80_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_80_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_80_scrollbar_horizontal" class="mCSB_scrollTools mCSB_80_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_80_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>分析：在这个过程中，你直接接触的就是中介，就如同现实生活中的样子，你看不到房东，但是你依旧租到了房东的房子通过代理，这就是所谓的代理模式，程序源自于生活，所以学编程的人，一般能够更加抽象的看待生活中发生的事情。</p>
<p><strong>静态代理的好处:</strong></p>
<ul>
<li>可以使得我们的真实角色更加纯粹 . 不再去关注一些公共的事情 .</li>
<li>公共的业务由代理来完成 . 实现了业务的分工 ,</li>
<li>公共业务发生扩展时变得更加集中和方便 .</li>
</ul>
<p>缺点 :</p>
<ul>
<li>类多了 , 多了代理类 , 工作量变大了 . 开发效率降低 .</li>
</ul>
<p>我们想要静态代理的好处，又不想要静态代理的缺点，所以 , 就有了动态代理 !</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="102、加深理解" tid="tid-aJJp2T" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>11</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">10.2、加深理解</span></b></h2></span>
<p>同学们练习完毕后，我们再来举一个例子，巩固大家的学习！</p>
<p>练习步骤：</p>
<p>1、创建一个抽象角色，比如咋们平时做的用户业务，抽象起来就是增删改查！</p>
<code-box id="FmEPHW" style="position: relative;display: block;"><button code-id="FmEPHW" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-FmEPHW" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-FmEPHW" class="mCustomScrollbar _mCS_81 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_81" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_81_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-sXJkzE"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//抽象角色：增删改查业务</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_81_scrollbar_vertical" class="mCSB_scrollTools mCSB_81_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_81_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_81_scrollbar_horizontal" class="mCSB_scrollTools mCSB_81_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_81_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、我们需要一个真实对象来完成这些增删改查操作</p>
<code-box id="PmQXXe" style="position: relative;display: block;"><button code-id="PmQXXe" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-PmQXXe" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-PmQXXe" class="mCustomScrollbar _mCS_82 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_82" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_82_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-YNPkb6"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//真实对象，完成增删改查操作的人</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"增加了一个用户"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"删除了一个用户"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"更新了一个用户"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"查询了一个用户"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_82_scrollbar_vertical" class="mCSB_scrollTools mCSB_82_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_82_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_82_scrollbar_horizontal" class="mCSB_scrollTools mCSB_82_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_82_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、需求来了，现在我们需要增加一个日志功能，怎么实现！</p>
<ul>
<li>思路1 ：在实现类上增加代码 【麻烦！】</li>
<li>思路2：使用代理来做，能够不改变原来的业务情况下，实现此功能就是最好的了！</li>
</ul>
<p>4、设置一个代理类来处理日志！代理角色</p>
<code-box id="knWBRF" style="position: relative;display: block;"><button code-id="knWBRF" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-knWBRF" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-knWBRF" class="mCustomScrollbar _mCS_83 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_83" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_83_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-jZPhyC"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//代理角色，在这里面增加日志的实现</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> UserServiceImpl userService;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUserService</span><span class="hljs-params">(UserServiceImpl userService)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.userService = userService;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       log(<span class="hljs-string">"add"</span>);
<code-line class="line-numbers-rows"></code-line>       userService.add();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       log(<span class="hljs-string">"delete"</span>);
<code-line class="line-numbers-rows"></code-line>       userService.delete();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       log(<span class="hljs-string">"update"</span>);
<code-line class="line-numbers-rows"></code-line>       userService.update();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">query</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       log(<span class="hljs-string">"query"</span>);
<code-line class="line-numbers-rows"></code-line>       userService.query();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String msg)</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"执行了"</span>+msg+<span class="hljs-string">"方法"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_83_scrollbar_vertical" class="mCSB_scrollTools mCSB_83_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_83_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_83_scrollbar_horizontal" class="mCSB_scrollTools mCSB_83_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_83_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>5、测试访问类：</p>
<code-box id="M5E4Zb" style="position: relative;display: block;"><button code-id="M5E4Zb" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-M5E4Zb" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-M5E4Zb" class="mCustomScrollbar _mCS_84 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_84" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_84_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-fyaZy3"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//真实业务</span>
<code-line class="line-numbers-rows"></code-line>       UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//代理类</span>
<code-line class="line-numbers-rows"></code-line>       UserServiceProxy proxy = <span class="hljs-keyword">new</span> UserServiceProxy();
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//使用代理类实现日志功能！</span>
<code-line class="line-numbers-rows"></code-line>       proxy.setUserService(userService);
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>       proxy.add();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_84_scrollbar_vertical" class="mCSB_scrollTools mCSB_84_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_84_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_84_scrollbar_horizontal" class="mCSB_scrollTools mCSB_84_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_84_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>OK，到了现在代理模式大家应该都没有什么问题了，重点大家需要理解其中的思想；</p>
<p>我们在不改变原来的代码的情况下，实现了对原有功能的增强，这是AOP中最核心的思想</p>
<p>聊聊AOP：纵向开发，横向开发</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLJqcgicA5aEKtxYibgLPicNfDwicKIn9NlFl86rriaVRicKnEXlPNiacbHiaLibw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLJqcgicA5aEKtxYibgLPicNfDwicKIn9NlFl86rriaVRicKnEXlPNiacbHiaLibw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="103、动态代理" tid="tid-iBfrfm" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>11</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">10.3、动态代理</span></b></h2></span>
<ul>
<li>
<p>动态代理的角色和静态代理的一样 .</p>
</li>
<li>
<p>动态代理的代理类是动态生成的 . 静态代理的代理类是我们提前写好的</p>
</li>
<li>
<p>动态代理分为两类 : 一类是基于接口动态代理 , 一类是基于类的动态代理</p>
</li>
<li>
<ul>
<li>基于接口的动态代理----JDK动态代理</li>
<li>基于类的动态代理--cglib</li>
<li>现在用的比较多的是 javasist 来生成动态代理 . 百度一下javasist</li>
<li>我们这里使用JDK的原生代码来实现，其余的道理都是一样的！、</li>
</ul>
</li>
</ul>
<p><strong>JDK的动态代理需要了解两个类</strong></p>
<p>核心 : InvocationHandler   和   Proxy  ， 打开JDK帮助文档看看</p>
<p>【InvocationHandler：调用处理程序】</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLxvyvZMwn9gIEibuxjFwE3enJ4TgKO5PXxM5BPr6Bh7GQwExLvst4AsQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLxvyvZMwn9gIEibuxjFwE3enJ4TgKO5PXxM5BPr6Bh7GQwExLvst4AsQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<code-box id="yMbDGH" style="position: relative;display: block;"><button code-id="yMbDGH" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-yMbDGH" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-yMbDGH" class="mCustomScrollbar _mCS_85 mCS-autoHide"><div id="mCSB_85" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_85_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 1235px;" dir="ltr"><code-pre class="code-pre" id="pre-EDcajs"><code-line class="line-numbers-rows"></code-line><span class="hljs-function">Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, 方法 method, Object[] args)</span>；
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//参数</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//proxy - 调用该方法的代理实例</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//method -所述方法对应于调用代理实例上的接口方法的实例。方法对象的声明类将是该方法声明的接口，它可以是代理类继承该方法的代理接口的超级接口。</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//args -包含的方法调用传递代理实例的参数值的对象的阵列，或null如果接口方法没有参数。原始类型的参数包含在适当的原始包装器类的实例中，例如java.lang.Integer或java.lang.Boolean 。</span>
<code-line class="line-numbers-rows"></code-line></span></code-pre></div></div><div id="mCSB_85_scrollbar_vertical" class="mCSB_scrollTools mCSB_85_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_85_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_85_scrollbar_horizontal" class="mCSB_scrollTools mCSB_85_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_85_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; display: block; width: 320px; max-width: 617px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>【Proxy  : 代理】</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLficZiaPU0h9wdeDicTMgBHemVvIdYTsE712DhkDfg0pdRg169oG5FHTmw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLficZiaPU0h9wdeDicTMgBHemVvIdYTsE712DhkDfg0pdRg169oG5FHTmw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLCIv9ibKb4c9KjmZNNbsDbZojUy0aB1lS3ibqa1SJaBzkK7KneicEX43Zw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jMLCIv9ibKb4c9KjmZNNbsDbZojUy0aB1lS3ibqa1SJaBzkK7KneicEX43Zw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jML394CqGFmCP1nUlaU9mdLk19o1qIzjicTgDiaPz7ibR371jAo3uNNQ8Qgw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7LoeicP1O2nfyA6H0XPa9jML394CqGFmCP1nUlaU9mdLk19o1qIzjicTgDiaPz7ibR371jAo3uNNQ8Qgw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<code-box id="WRQpf7" style="position: relative;display: block;"><button code-id="WRQpf7" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-WRQpf7" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-WRQpf7" class="mCustomScrollbar _mCS_86 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_86" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_86_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-ibBhCB"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//生成代理类</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getProxy</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">return</span> Proxy.newProxyInstance(<span class="hljs-keyword">this</span>.getClass().getClassLoader(),
<code-line class="line-numbers-rows"></code-line>                                 rent.getClass().getInterfaces(),<span class="hljs-keyword">this</span>);
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_86_scrollbar_vertical" class="mCSB_scrollTools mCSB_86_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_86_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_86_scrollbar_horizontal" class="mCSB_scrollTools mCSB_86_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_86_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>代码实现</strong></p>
<p>抽象角色和真实角色和之前的一样！</p>
<p>Rent . java 即抽象角色</p>
<code-box id="p8YfHA" style="position: relative;display: block;"><button code-id="p8YfHA" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-p8YfHA" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-p8YfHA" class="mCustomScrollbar _mCS_87 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_87" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_87_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-CJ2Kyn"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//抽象角色：租房</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Rent</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_87_scrollbar_vertical" class="mCSB_scrollTools mCSB_87_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_87_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_87_scrollbar_horizontal" class="mCSB_scrollTools mCSB_87_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_87_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>Host . java 即真实角色j</p>
<code-box id="3ef4mB" style="position: relative;display: block;"><button code-id="3ef4mB" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-3ef4mB" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-3ef4mB" class="mCustomScrollbar _mCS_88 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_88" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_88_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-GSAAew"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//真实角色: 房东，房东要出租房子</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Host</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Rent</span></span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">rent</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"房屋出租"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_88_scrollbar_vertical" class="mCSB_scrollTools mCSB_88_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_88_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_88_scrollbar_horizontal" class="mCSB_scrollTools mCSB_88_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_88_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>ProxyInvocationHandler. java 即代理角色</p>
<code-box id="yyAPNk" style="position: relative;display: block;"><button code-id="yyAPNk" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-yyAPNk" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-yyAPNk" class="mCustomScrollbar _mCS_89 mCS-autoHide"><div id="mCSB_89" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_89_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 675px;" dir="ltr"><code-pre class="code-pre" id="pre-fbiJFE"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvocationHandler</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Rent rent;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRent</span><span class="hljs-params">(Rent rent)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.rent = rent;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//生成代理类，重点是第二个参数，获取要代理的抽象角色！之前都是一个角色，现在可以代理一类角色</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getProxy</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> Proxy.newProxyInstance(<span class="hljs-keyword">this</span>.getClass().getClassLoader(),
<code-line class="line-numbers-rows"></code-line>               rent.getClass().getInterfaces(),<span class="hljs-keyword">this</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">// proxy : 代理类 method : 代理类的调用处理程序的方法对象.</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">// 处理代理实例上的方法调用并返回结果</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
<code-line class="line-numbers-rows"></code-line>       seeHouse();
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//核心：本质利用反射实现！</span>
<code-line class="line-numbers-rows"></code-line>       Object result = method.invoke(rent, args);
<code-line class="line-numbers-rows"></code-line>       fare();
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> result;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//看房</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">seeHouse</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"带房客看房"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//收中介费</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">fare</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"收中介费"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_89_scrollbar_vertical" class="mCSB_scrollTools mCSB_89_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_89_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_89_scrollbar_horizontal" class="mCSB_scrollTools mCSB_89_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_89_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 586px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>Client . java</p>
<code-box id="RCCEwx" style="position: relative;display: block;"><button code-id="RCCEwx" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-RCCEwx" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-RCCEwx" class="mCustomScrollbar _mCS_90 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_90" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_90_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-TetF8a"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//租客</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//真实角色</span>
<code-line class="line-numbers-rows"></code-line>       Host host = <span class="hljs-keyword">new</span> Host();
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//代理实例的调用处理程序</span>
<code-line class="line-numbers-rows"></code-line>       ProxyInvocationHandler pih = <span class="hljs-keyword">new</span> ProxyInvocationHandler();
<code-line class="line-numbers-rows"></code-line>       pih.setRent(host); <span class="hljs-comment">//将真实角色放置进去！</span>
<code-line class="line-numbers-rows"></code-line>       Rent proxy = (Rent)pih.getProxy(); <span class="hljs-comment">//动态生成对应的代理类！</span>
<code-line class="line-numbers-rows"></code-line>       proxy.rent();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_90_scrollbar_vertical" class="mCSB_scrollTools mCSB_90_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_90_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_90_scrollbar_horizontal" class="mCSB_scrollTools mCSB_90_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_90_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>核心：<strong>一个动态代理 , 一般代理某一类业务 , 一个动态代理可以代理多个类，代理的是接口！、</strong></p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="104、深化理解" tid="tid-AKH5MW" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>11</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>4</i></b></span><b class="dev__developer"><span class="dev__title">10.4、深化理解</span></b></h2></span>
<p>我们来使用动态代理实现代理我们后面写的UserService！</p>
<p>我们也可以编写一个通用的动态代理实现的类！所有的代理对象设置为Object即可！</p>
<code-box id="wx7F8F" style="position: relative;display: block;"><button code-id="wx7F8F" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-wx7F8F" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-wx7F8F" class="mCustomScrollbar _mCS_91 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_91" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_91_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-atbQrZ"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProxyInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InvocationHandler</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> Object target;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTarget</span><span class="hljs-params">(Object target)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.target = target;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//生成代理类</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">getProxy</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> Proxy.newProxyInstance(<span class="hljs-keyword">this</span>.getClass().getClassLoader(),
<code-line class="line-numbers-rows"></code-line>               target.getClass().getInterfaces(),<span class="hljs-keyword">this</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">// proxy : 代理类</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">// method : 代理类的调用处理程序的方法对象.</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
<code-line class="line-numbers-rows"></code-line>       log(method.getName());
<code-line class="line-numbers-rows"></code-line>       Object result = method.invoke(target, args);
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> result;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">log</span><span class="hljs-params">(String methodName)</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"执行了"</span>+methodName+<span class="hljs-string">"方法"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_91_scrollbar_vertical" class="mCSB_scrollTools mCSB_91_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_91_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_91_scrollbar_horizontal" class="mCSB_scrollTools mCSB_91_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_91_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试！</p>
<code-box id="DciEJQ" style="position: relative;display: block;"><button code-id="DciEJQ" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-DciEJQ" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-DciEJQ" class="mCustomScrollbar _mCS_92 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_92" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_92_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-JaQTHh"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//真实对象</span>
<code-line class="line-numbers-rows"></code-line>       UserServiceImpl userService = <span class="hljs-keyword">new</span> UserServiceImpl();
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//代理对象的调用处理程序</span>
<code-line class="line-numbers-rows"></code-line>       ProxyInvocationHandler pih = <span class="hljs-keyword">new</span> ProxyInvocationHandler();
<code-line class="line-numbers-rows"></code-line>       pih.setTarget(userService); <span class="hljs-comment">//设置要代理的对象</span>
<code-line class="line-numbers-rows"></code-line>       UserService proxy = (UserService)pih.getProxy(); <span class="hljs-comment">//动态生成代理类！</span>
<code-line class="line-numbers-rows"></code-line>       proxy.delete();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_92_scrollbar_vertical" class="mCSB_scrollTools mCSB_92_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_92_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_92_scrollbar_horizontal" class="mCSB_scrollTools mCSB_92_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_92_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试，增删改查，查看结果！</p>
<blockquote>
<span title-type="h5" class="header__span" style="transform:scale(0.6);left: -147.20px;"><h5 id="动态代理的好处" tid="tid-CY4CaZ" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 16.00px;"></span><b class="dev__developer"><span class="dev__title">动态代理的好处</span></b></h5></span>
</blockquote>
<p>静态代理有的它都有，静态代理没有的，它也有！</p>
<ul>
<li>可以使得我们的真实角色更加纯粹 . 不再去关注一些公共的事情 .</li>
<li>公共的业务由代理来完成 . 实现了业务的分工 ,</li>
<li>公共业务发生扩展时变得更加集中和方便 .</li>
<li>一个动态代理 , 一般代理某一类业务</li>
<li>一个动态代理可以代理多个类，代理的是接口！</li>
</ul>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="11、aop" tid="tid-dW7hQ7" class="header__dev"><span style=""><b class="dev__fe"><i>12</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">11、AOP</span></b></h1></span>
<p>那我们接下来就来聊聊AOP吧！</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="111、什么是aop" tid="tid-3mZQCE" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>12</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">11.1、什么是AOP</span></b></h2></span>
<p>AOP（Aspect Oriented Programming）意为：面向切面编程，通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。AOP是OOP的延续，是软件开发中的一个热点，也是Spring框架中的一个重要内容，是函数式编程的一种衍生范型。利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JAeTYOaaH6rZ6WmLLgwQLHf5pmH30gj6mZm81PC7iauicFu55sicJtspU7K3vTCVdZCDTSHq7D5XHlw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JAeTYOaaH6rZ6WmLLgwQLHf5pmH30gj6mZm81PC7iauicFu55sicJtspU7K3vTCVdZCDTSHq7D5XHlw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="112、aop在spring中的作用" tid="tid-3NdpHm" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>12</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">11.2、Aop在Spring中的作用</span></b></h2></span>
<p>提供声明式事务；允许用户自定义切面</p>
<p>以下名词需要了解下：</p>
<ul>
<li>横切关注点：跨越应用程序多个模块的方法或功能。即是，与我们业务逻辑无关的，但是我们需要关注的部分，就是横切关注点。如日志 , 安全 , 缓存 , 事务等等 ....</li>
<li>切面（ASPECT）：横切关注点 被模块化 的特殊对象。即，它是一个类。</li>
<li>通知（Advice）：切面必须要完成的工作。即，它是类中的一个方法。</li>
<li>目标（Target）：被通知对象。</li>
<li>代理（Proxy）：向目标对象应用通知之后创建的对象。</li>
<li>切入点（PointCut）：切面通知 执行的 “地点”的定义。</li>
<li>连接点（JointPoint）：与切入点匹配的执行点。</li>
</ul>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JAeTYOaaH6rZ6WmLLgwQLHVOZ1JpRb7ViaprZCRXsUbH0bZpibiaTjqib68LQHOWZicSvuU8Y1dquUVGw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JAeTYOaaH6rZ6WmLLgwQLHVOZ1JpRb7ViaprZCRXsUbH0bZpibiaTjqib68LQHOWZicSvuU8Y1dquUVGw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p>SpringAOP中，通过Advice定义横切逻辑，Spring中支持5种类型的Advice:</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JAeTYOaaH6rZ6WmLLgwQLHbAWH8haUQeJ0LVBxxX0icC5TZlBkEBGibibey7jFrCbibPzQcRhkNFcGAA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JAeTYOaaH6rZ6WmLLgwQLHbAWH8haUQeJ0LVBxxX0icC5TZlBkEBGibibey7jFrCbibPzQcRhkNFcGAA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p>即 Aop 在 不改变原有代码的情况下 , 去增加新的功能 .</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="113、使用spring实现aop" tid="tid-FwW85S" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>12</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">11.3、使用Spring实现Aop</span></b></h2></span>
<p>【重点】使用AOP织入，需要导入一个依赖包！</p>
<code-box id="NJja2f" style="position: relative;display: block;"><button code-id="NJja2f" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-NJja2f" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-NJja2f" class="mCustomScrollbar _mCS_93 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_93" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_93_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-3ZjnGC"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.aspectj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectjweaver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_93_scrollbar_vertical" class="mCSB_scrollTools mCSB_93_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_93_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_93_scrollbar_horizontal" class="mCSB_scrollTools mCSB_93_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_93_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>第一种方式</strong></p>
<p><strong>通过 Spring API 实现</strong></p>
<p>首先编写我们的业务接口和实现类</p>
<code-box id="P4trp8" style="position: relative;display: block;"><button code-id="P4trp8" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-P4trp8" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-P4trp8" class="mCustomScrollbar _mCS_94 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_94" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_94_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-RFrNsz"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserService</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">search</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserService</span></span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">add</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"增加用户"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">delete</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"删除用户"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">update</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"更新用户"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">search</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"查询用户"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_94_scrollbar_vertical" class="mCSB_scrollTools mCSB_94_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_94_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_94_scrollbar_horizontal" class="mCSB_scrollTools mCSB_94_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_94_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>然后去写我们的增强类 , 我们编写两个 , 一个前置增强 一个后置增强</p>
<code-box id="NFwNsf" style="position: relative;display: block;"><button code-id="NFwNsf" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-NFwNsf" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-NFwNsf" class="mCustomScrollbar _mCS_95 mCS-autoHide"><div id="mCSB_95" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_95_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 801px;" dir="ltr"><code-pre class="code-pre" id="pre-aQbpn7"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Log</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MethodBeforeAdvice</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//method : 要执行的目标对象的方法</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//objects : 被调用的方法的参数</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//Object : 目标对象</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">(Method method, Object[] objects, Object o)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println( o.getClass().getName() + <span class="hljs-string">"的"</span> + method.getName() + <span class="hljs-string">"方法被执行了"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AfterLog</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">AfterReturningAdvice</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//returnValue 返回值</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//method被调用的方法</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//args 被调用的方法的对象的参数</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//target 被调用的目标对象</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Override</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">afterReturning</span><span class="hljs-params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"执行了"</span> + target.getClass().getName()
<code-line class="line-numbers-rows"></code-line>       +<span class="hljs-string">"的"</span>+method.getName()+<span class="hljs-string">"方法,"</span>
<code-line class="line-numbers-rows"></code-line>       +<span class="hljs-string">"返回值："</span>+returnValue);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_95_scrollbar_vertical" class="mCSB_scrollTools mCSB_95_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_95_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_95_scrollbar_horizontal" class="mCSB_scrollTools mCSB_95_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_95_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 494px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>最后去spring的文件中注册 , 并实现aop切入实现 , 注意导入约束 .</p>
<code-box id="GQkjBG" style="position: relative;display: block;"><button code-id="GQkjBG" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-GQkjBG" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-GQkjBG" class="mCustomScrollbar _mCS_96 mCS-autoHide"><div id="mCSB_96" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_96_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 724px;" dir="ltr"><code-pre class="code-pre" id="pre-4APytJ"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">"http://www.springframework.org/schema/aop"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/beans/spring-beans.xsd
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/aop
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">&lt;!--注册bean--&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.service.UserServiceImpl"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"log"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.log.Log"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"afterLog"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.log.AfterLog"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">&lt;!--aop的配置--&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">&lt;!--切入点 expression:表达式匹配要执行的方法--&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"pointcut"</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">"execution(* com.kuang.service.UserServiceImpl.*(..))"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">&lt;!--执行环绕; advice-ref执行方法 . pointcut-ref切入点--&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">"log"</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"pointcut"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">"afterLog"</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"pointcut"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code-pre></div></div><div id="mCSB_96_scrollbar_vertical" class="mCSB_scrollTools mCSB_96_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_96_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_96_scrollbar_horizontal" class="mCSB_scrollTools mCSB_96_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_96_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 546px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试</p>
<code-box id="hYWWb5" style="position: relative;display: block;"><button code-id="hYWWb5" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-hYWWb5" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-hYWWb5" class="mCustomScrollbar _mCS_97 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_97" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_97_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-dQJfmD"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>       UserService userService = (UserService) context.getBean(<span class="hljs-string">"userService"</span>);
<code-line class="line-numbers-rows"></code-line>       userService.search();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_97_scrollbar_vertical" class="mCSB_scrollTools mCSB_97_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_97_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_97_scrollbar_horizontal" class="mCSB_scrollTools mCSB_97_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_97_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>Aop的重要性 : 很重要 . 一定要理解其中的思路 , 主要是思想的理解这一块 .</p>
<p>Spring的Aop就是将公共的业务 (日志 , 安全等) 和领域业务结合起来 , 当执行领域业务时 , 将会把公共业务加进来 . 实现公共业务的重复利用 . 领域业务更纯粹 , 程序猿专注领域业务 , 其本质还是动态代理 .</p>
<p><strong>第二种方式</strong></p>
<p><strong>自定义类来实现Aop</strong></p>
<p>目标业务类不变依旧是userServiceImpl</p>
<p>第一步 : 写我们自己的一个切入类</p>
<code-box id="PXW2DC" style="position: relative;display: block;"><button code-id="PXW2DC" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-PXW2DC" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-PXW2DC" class="mCustomScrollbar _mCS_98 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_98" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_98_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-6Pj8Gj"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiyPointcut</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"---------方法执行前---------"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"---------方法执行后---------"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_98_scrollbar_vertical" class="mCSB_scrollTools mCSB_98_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_98_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_98_scrollbar_horizontal" class="mCSB_scrollTools mCSB_98_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_98_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>去spring中配置</p>
<code-box id="P6XdEy" style="position: relative;display: block;"><button code-id="P6XdEy" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-P6XdEy" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-P6XdEy" class="mCustomScrollbar _mCS_99 mCS-autoHide"><div id="mCSB_99" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_99_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 745px;" dir="ltr"><code-pre class="code-pre" id="pre-7XMSi5"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--第二种方式自定义实现--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--注册bean--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"diy"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.config.DiyPointcut"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--aop的配置--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">&lt;!--第二种方式：使用AOP的标签实现--&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"diy"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"diyPonitcut"</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">"execution(* com.kuang.service.UserServiceImpl.*(..))"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">aop:before</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"diyPonitcut"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"before"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">aop:after</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"diyPonitcut"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"after"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span>
</code-pre></div></div><div id="mCSB_99_scrollbar_vertical" class="mCSB_scrollTools mCSB_99_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_99_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_99_scrollbar_horizontal" class="mCSB_scrollTools mCSB_99_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_99_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 531px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试：</p>
<code-box id="zETbB2" style="position: relative;display: block;"><button code-id="zETbB2" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-zETbB2" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-zETbB2" class="mCustomScrollbar _mCS_100 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_100" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_100_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-pFrDFG"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyTest</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>       UserService userService = (UserService) context.getBean(<span class="hljs-string">"userService"</span>);
<code-line class="line-numbers-rows"></code-line>       userService.add();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_100_scrollbar_vertical" class="mCSB_scrollTools mCSB_100_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_100_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_100_scrollbar_horizontal" class="mCSB_scrollTools mCSB_100_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_100_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>第三种方式</strong></p>
<p><strong>使用注解实现</strong></p>
<p>第一步：编写一个注解实现的增强类</p>
<code-box id="d8bFbc" style="position: relative;display: block;"><button code-id="d8bFbc" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-d8bFbc" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-d8bFbc" class="mCustomScrollbar _mCS_101 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_101" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_101_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-4d6yCf"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">package</span> com.kuang.config;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.After;
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Around;
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Aspect;
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Before;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Aspect</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AnnotationPointcut</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Before("execution(* com.kuang.service.UserServiceImpl.*(..))")</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">before</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"---------方法执行前---------"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@After("execution(* com.kuang.service.UserServiceImpl.*(..))")</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">after</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"---------方法执行后---------"</span>);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Around("execution(* com.kuang.service.UserServiceImpl.*(..))")</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">around</span><span class="hljs-params">(ProceedingJoinPoint jp)</span> <span class="hljs-keyword">throws</span> Throwable </span>{
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"环绕前"</span>);
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"签名:"</span>+jp.getSignature());
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">//执行目标方法proceed</span>
<code-line class="line-numbers-rows"></code-line>       Object proceed = jp.proceed();
<code-line class="line-numbers-rows"></code-line>       System.out.println(<span class="hljs-string">"环绕后"</span>);
<code-line class="line-numbers-rows"></code-line>       System.out.println(proceed);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_101_scrollbar_vertical" class="mCSB_scrollTools mCSB_101_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_101_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_101_scrollbar_horizontal" class="mCSB_scrollTools mCSB_101_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_101_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>第二步：在Spring配置文件中，注册bean，并增加支持注解的配置</p>
<code-box id="YA2ywy" style="position: relative;display: block;"><button code-id="YA2ywy" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-YA2ywy" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-YA2ywy" class="mCustomScrollbar _mCS_102 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_102" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_102_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-6kKQfi"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--第三种方式:注解实现--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"annotationPointcut"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.config.AnnotationPointcut"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">aop:aspectj-autoproxy</span>/&gt;</span>
</code-pre></div></div><div id="mCSB_102_scrollbar_vertical" class="mCSB_scrollTools mCSB_102_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_102_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_102_scrollbar_horizontal" class="mCSB_scrollTools mCSB_102_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_102_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>aop:aspectj-autoproxy：说明</p>
<code-box id="MXyXTc" style="position: relative;display: block;"><button code-id="MXyXTc" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-MXyXTc" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-MXyXTc" class="mCustomScrollbar _mCS_103 mCS-autoHide"><div id="mCSB_103" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_103_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 2026px;" dir="ltr"><code-pre class="code-pre" id="pre-3Yyish"><code-line class="line-numbers-rows"></code-line>通过aop命名空间的&lt;aop:aspectj-autoproxy /&gt;声明自动为spring容器中那些配置@aspectJ切面的bean创建代理，织入切面。当然，spring 在内部依旧采用AnnotationAwareAspectJAutoProxyCreator进行自动代理的创建工作，但具体实现的细节已经被&lt;aop:aspectj-autoproxy /&gt;隐藏起来了
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>&lt;aop:aspectj-autoproxy /&gt;有一个proxy-target-<span class="hljs-keyword">class</span>属性，默认为<span class="hljs-literal">false</span>，表示使用jdk动态代理织入增强，当配为&lt;aop:aspectj-autoproxy  poxy-target-<span class="hljs-keyword">class</span>=<span class="hljs-string">"true"</span>/&gt;时，表示使用<span class="hljs-built_in">CGLib</span>动态代理技术织入增强。不过即使proxy-target-<span class="hljs-keyword">class</span>设置为<span class="hljs-literal">false</span>，如果目标类没有声明接口，则spring将自动使用<span class="hljs-built_in">CGLib</span>动态代理。
</code-pre></div></div><div id="mCSB_103_scrollbar_vertical" class="mCSB_scrollTools mCSB_103_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_103_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_103_scrollbar_horizontal" class="mCSB_scrollTools mCSB_103_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_103_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; display: block; width: 195px; max-width: 617px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>到了这里，AOP的思想和使用相信大家就没问题了！</p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="12、整合mybatis" tid="tid-MWSpH7" class="header__dev"><span style=""><b class="dev__fe"><i>13</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">12、整合Mybatis</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="121、步骤" tid="tid-7BeQZX" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>13</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">12.1、步骤</span></b></h2></span>
<p>1、导入相关jar包</p>
<p>junit</p>
<code-box id="2W7AMj" style="position: relative;display: block;"><button code-id="2W7AMj" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-2W7AMj" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-2W7AMj" class="mCustomScrollbar _mCS_104 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_104" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_104_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-C4ptW2"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_104_scrollbar_vertical" class="mCSB_scrollTools mCSB_104_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_104_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_104_scrollbar_horizontal" class="mCSB_scrollTools mCSB_104_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_104_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>mybatis</p>
<code-box id="cTFrmC" style="position: relative;display: block;"><button code-id="cTFrmC" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-cTFrmC" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-cTFrmC" class="mCustomScrollbar _mCS_105 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_105" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_105_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-iF3NnQ"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_105_scrollbar_vertical" class="mCSB_scrollTools mCSB_105_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_105_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_105_scrollbar_horizontal" class="mCSB_scrollTools mCSB_105_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_105_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>mysql-connector-javax</p>
<code-box id="CHE6kH" style="position: relative;display: block;"><button code-id="CHE6kH" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-CHE6kH" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-CHE6kH" class="mCustomScrollbar _mCS_106 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_106" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_106_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-EPkpAy"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.47<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_106_scrollbar_vertical" class="mCSB_scrollTools mCSB_106_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_106_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_106_scrollbar_horizontal" class="mCSB_scrollTools mCSB_106_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_106_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>spring相关</p>
<code-box id="TcWs7a" style="position: relative;display: block;"><button code-id="TcWs7a" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-TcWs7a" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-TcWs7a" class="mCustomScrollbar _mCS_107 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_107" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_107_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-R2JSiJ"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.10.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.1.10.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_107_scrollbar_vertical" class="mCSB_scrollTools mCSB_107_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_107_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_107_scrollbar_horizontal" class="mCSB_scrollTools mCSB_107_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_107_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>aspectJ AOP 织入器</p>
<code-box id="adCiiX" style="position: relative;display: block;"><button code-id="adCiiX" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-adCiiX" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-adCiiX" class="mCustomScrollbar _mCS_108 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_108" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_108_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-xYTtKR"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.aspectj<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aspectjweaver<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.9.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_108_scrollbar_vertical" class="mCSB_scrollTools mCSB_108_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_108_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_108_scrollbar_horizontal" class="mCSB_scrollTools mCSB_108_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_108_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>mybatis-spring整合包 【重点】</p>
<code-box id="jEcNP7" style="position: relative;display: block;"><button code-id="jEcNP7" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-jEcNP7" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-jEcNP7" class="mCustomScrollbar _mCS_109 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_109" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_109_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-dBbnj7"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_109_scrollbar_vertical" class="mCSB_scrollTools mCSB_109_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_109_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_109_scrollbar_horizontal" class="mCSB_scrollTools mCSB_109_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_109_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>配置Maven静态资源过滤问题！</p>
<code-box id="F4x7wA" style="position: relative;display: block;"><button code-id="F4x7wA" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-F4x7wA" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-F4x7wA" class="mCustomScrollbar _mCS_110 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_110" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_110_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-XsYfDZ"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>           <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>           <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>               <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>               <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>           <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>           <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code-pre></div></div><div id="mCSB_110_scrollbar_vertical" class="mCSB_scrollTools mCSB_110_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_110_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_110_scrollbar_horizontal" class="mCSB_scrollTools mCSB_110_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_110_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、编写配置文件</p>
<p>3、代码实现</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="122、回忆mybatis" tid="tid-XnxjWi" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>13</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">12.2、回忆MyBatis</span></b></h2></span>
<p><strong>编写pojo实体类</strong></p>
<code-box id="4wx4CW" style="position: relative;display: block;"><button code-id="4wx4CW" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-4wx4CW" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-4wx4CW" class="mCustomScrollbar _mCS_111 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_111" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_111_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-i3xsQb"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">package</span> com.kuang.pojo;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;  <span class="hljs-comment">//id</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> String name;   <span class="hljs-comment">//姓名</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> String pwd;   <span class="hljs-comment">//密码</span>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_111_scrollbar_vertical" class="mCSB_scrollTools mCSB_111_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_111_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_111_scrollbar_horizontal" class="mCSB_scrollTools mCSB_111_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_111_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>实现mybatis的配置文件</strong></p>
<code-box id="FTZfFW" style="position: relative;display: block;"><button code-id="FTZfFW" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-FTZfFW" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-FTZfFW" class="mCustomScrollbar _mCS_112 mCS-autoHide"><div id="mCSB_112" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_112_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 990px;" dir="ltr"><code-pre class="code-pre" id="pre-Yz5KD4"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.kuang.pojo"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">"development"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"development"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>           <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"JDBC"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>           <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>               <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.jdbc.Driver"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>               <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf8"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>               <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"root"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>               <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"123456"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>           <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.kuang.dao"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code-pre></div></div><div id="mCSB_112_scrollbar_vertical" class="mCSB_scrollTools mCSB_112_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_112_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_112_scrollbar_horizontal" class="mCSB_scrollTools mCSB_112_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_112_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; display: block; width: 400px; max-width: 617px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>UserDao接口编写</strong></p>
<code-box id="4rr45m" style="position: relative;display: block;"><button code-id="4rr45m" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-4rr45m" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-4rr45m" class="mCustomScrollbar _mCS_113 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_113" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_113_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-2FQsxN"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserMapper</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectUser</span><span class="hljs-params">()</span></span>;
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_113_scrollbar_vertical" class="mCSB_scrollTools mCSB_113_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_113_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_113_scrollbar_horizontal" class="mCSB_scrollTools mCSB_113_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_113_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>接口对应的Mapper映射文件</strong></p>
<code-box id="hwYAQF" style="position: relative;display: block;"><button code-id="hwYAQF" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-hwYAQF" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-hwYAQF" class="mCustomScrollbar _mCS_114 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_114" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_114_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-JjJBCS"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.kuang.dao.UserMapper"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUser"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>    select * from user
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code-pre></div></div><div id="mCSB_114_scrollbar_vertical" class="mCSB_scrollTools mCSB_114_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_114_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_114_scrollbar_horizontal" class="mCSB_scrollTools mCSB_114_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_114_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>测试类</strong></p>
<code-box id="DKb7aD" style="position: relative;display: block;"><button code-id="DKb7aD" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-DKb7aD" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-DKb7aD" class="mCustomScrollbar _mCS_115 mCS-autoHide"><div id="mCSB_115" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_115_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 647px;" dir="ltr"><code-pre class="code-pre" id="pre-xKJWZn"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">selectUser</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   String resource = <span class="hljs-string">"mybatis-config.xml"</span>;
<code-line class="line-numbers-rows"></code-line>   InputStream inputStream = Resources.getResourceAsStream(resource);
<code-line class="line-numbers-rows"></code-line>   SqlSessionFactory sqlSessionFactory = <span class="hljs-keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);
<code-line class="line-numbers-rows"></code-line>   SqlSession sqlSession = sqlSessionFactory.openSession();
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   UserMapper mapper = sqlSession.getMapper(UserMapper.class);
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   List&lt;User&gt; userList = mapper.selectUser();
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">for</span> (User user: userList){
<code-line class="line-numbers-rows"></code-line>       System.out.println(user);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   sqlSession.close();
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_115_scrollbar_vertical" class="mCSB_scrollTools mCSB_115_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_115_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_115_scrollbar_horizontal" class="mCSB_scrollTools mCSB_115_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_115_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 611px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="123、mybatis-spring学习" tid="tid-FbTdGy" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>13</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">12.3、MyBatis-Spring学习</span></b></h2></span>
<p>引入Spring之前需要了解mybatis-spring包中的一些重要类；</p>
<p><a href="http://www.mybatis.org/spring/zh/index.html" target="_blank">http://www.mybatis.org/spring/zh/index.html</a></p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JXnZ2vicYHdibF3mvk0w89CqKXn1bvBicZVeBJHGlFZOd8a6X5uzjVp6RnMR4ibS7hPdrHSxNGevkib0w/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JXnZ2vicYHdibF3mvk0w89CqKXn1bvBicZVeBJHGlFZOd8a6X5uzjVp6RnMR4ibS7hPdrHSxNGevkib0w/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p><strong>什么是 MyBatis-Spring？</strong></p>
<p>MyBatis-Spring 会帮助你将 MyBatis 代码无缝地整合到 Spring 中。</p>
<p><strong>知识基础</strong></p>
<p>在开始使用 MyBatis-Spring 之前，你需要先熟悉 Spring 和 MyBatis 这两个框架和有关它们的术语。这很重要</p>
<p>MyBatis-Spring 需要以下版本：</p>
<table>
<thead>
<tr>
<th style="text-align: left">MyBatis-Spring</th>
<th style="text-align: left">MyBatis</th>
<th style="text-align: left">Spring 框架</th>
<th style="text-align: left">Spring Batch</th>
<th style="text-align: left">Java</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">2.0</td>
<td style="text-align: left">3.5+</td>
<td style="text-align: left">5.0+</td>
<td style="text-align: left">4.0+</td>
<td style="text-align: left">Java 8+</td>
</tr>
<tr>
<td style="text-align: left">1.3</td>
<td style="text-align: left">3.4+</td>
<td style="text-align: left">3.2.2+</td>
<td style="text-align: left">2.1+</td>
<td style="text-align: left">Java 6+</td>
</tr>
</tbody>
</table>
<p>如果使用 Maven 作为构建工具，仅需要在 pom.xml 中加入以下代码即可：</p>
<code-box id="FP7H6y" style="position: relative;display: block;"><button code-id="FP7H6y" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-FP7H6y" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-FP7H6y" class="mCustomScrollbar _mCS_116 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_116" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_116_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-Kphh5m"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code-pre></div></div><div id="mCSB_116_scrollbar_vertical" class="mCSB_scrollTools mCSB_116_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_116_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_116_scrollbar_horizontal" class="mCSB_scrollTools mCSB_116_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_116_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>要和 Spring 一起使用 MyBatis，需要在 Spring 应用上下文中定义至少两样东西：一个 SqlSessionFactory 和至少一个数据映射器类。</p>
<p>在 MyBatis-Spring 中，可使用SqlSessionFactoryBean来创建 SqlSessionFactory。要配置这个工厂 bean，只需要把下面代码放在 Spring 的 XML 配置文件中：</p>
<code-box id="Q77DSN" style="position: relative;display: block;"><button code-id="Q77DSN" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Q77DSN" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Q77DSN" class="mCustomScrollbar _mCS_117 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_117" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_117_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-hknApJ"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sqlSessionFactory"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dataSource"</span> /&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_117_scrollbar_vertical" class="mCSB_scrollTools mCSB_117_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_117_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_117_scrollbar_horizontal" class="mCSB_scrollTools mCSB_117_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_117_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>注意：SqlSessionFactory需要一个 DataSource（数据源）。这可以是任意的 DataSource，只需要和配置其它 Spring 数据库连接一样配置它就可以了。</p>
<p>在基础的 MyBatis 用法中，是通过 SqlSessionFactoryBuilder 来创建 SqlSessionFactory 的。而在 MyBatis-Spring 中，则使用 SqlSessionFactoryBean 来创建。</p>
<p>在 MyBatis 中，你可以使用 SqlSessionFactory 来创建 SqlSession。一旦你获得一个 session 之后，你可以使用它来执行映射了的语句，提交或回滚连接，最后，当不再需要它的时候，你可以关闭 session。</p>
<p>SqlSessionFactory有一个唯一的必要属性：用于 JDBC 的 DataSource。这可以是任意的 DataSource 对象，它的配置方法和其它 Spring 数据库连接是一样的。</p>
<p>一个常用的属性是 configLocation，它用来指定 MyBatis 的 XML 配置文件路径。它在需要修改 MyBatis 的基础配置非常有用。通常，基础配置指的是 &lt; settings&gt; 或 &lt; typeAliases&gt;元素。</p>
<p>需要注意的是，这个配置文件并不需要是一个完整的 MyBatis 配置。确切地说，任何环境配置（<environments>），数据源（<datasource>）和 MyBatis 的事务管理器（<transactionmanager>）都会被忽略。SqlSessionFactoryBean 会创建它自有的 MyBatis 环境配置（Environment），并按要求设置自定义环境的值。</transactionmanager></datasource></environments></p>
<p>SqlSessionTemplate 是 MyBatis-Spring 的核心。作为 SqlSession 的一个实现，这意味着可以使用它无缝代替你代码中已经在使用的 SqlSession。</p>
<p>模板可以参与到 Spring 的事务管理中，并且由于其是线程安全的，可以供多个映射器类使用，你应该总是用 SqlSessionTemplate 来替换 MyBatis 默认的 DefaultSqlSession 实现。在同一应用程序中的不同类之间混杂使用可能会引起数据一致性的问题。</p>
<p>可以使用 SqlSessionFactory 作为构造方法的参数来创建 SqlSessionTemplate 对象。</p>
<code-box id="3DGmzh" style="position: relative;display: block;"><button code-id="3DGmzh" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-3DGmzh" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-3DGmzh" class="mCustomScrollbar _mCS_118 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_118" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_118_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-TbzR2t"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sqlSession"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.SqlSessionTemplate"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"sqlSessionFactory"</span> /&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_118_scrollbar_vertical" class="mCSB_scrollTools mCSB_118_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_118_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_118_scrollbar_horizontal" class="mCSB_scrollTools mCSB_118_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_118_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>现在，这个 bean 就可以直接注入到你的 DAO bean 中了。你需要在你的 bean 中添加一个 SqlSession 属性，就像下面这样：</p>
<code-box id="XjbHfR" style="position: relative;display: block;"><button code-id="XjbHfR" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-XjbHfR" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-XjbHfR" class="mCustomScrollbar _mCS_119 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_119" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_119_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-Hr8yba"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserDao</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-keyword">private</span> SqlSession sqlSession;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSqlSession</span><span class="hljs-params">(SqlSession sqlSession)</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">this</span>.sqlSession = sqlSession;
<code-line class="line-numbers-rows"></code-line>}
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUser</span><span class="hljs-params">(String userId)</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">return</span> sqlSession.getMapper...;
<code-line class="line-numbers-rows"></code-line>}
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_119_scrollbar_vertical" class="mCSB_scrollTools mCSB_119_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_119_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_119_scrollbar_horizontal" class="mCSB_scrollTools mCSB_119_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_119_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>按下面这样，注入 SqlSessionTemplate：</p>
<code-box id="HYZe38" style="position: relative;display: block;"><button code-id="HYZe38" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-HYZe38" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-HYZe38" class="mCustomScrollbar _mCS_120 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_120" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_120_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-iGNe3e"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userDao"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.sample.dao.UserDaoImpl"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sqlSession"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"sqlSession"</span> /&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_120_scrollbar_vertical" class="mCSB_scrollTools mCSB_120_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_120_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_120_scrollbar_horizontal" class="mCSB_scrollTools mCSB_120_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_120_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<blockquote>
<span title-type="h4" class="header__span" style="transform:scale(0.7);left: -110.40px;"><h4 id="整合实现一" tid="tid-hHpkyn" class="header__dev"><span style="visibility: hidden;"><b class="dev__fe"><i>1</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><span class="iconfont icon-weibiaoti22 titleIcon" style="left: 24.00px;"></span><b class="dev__developer"><span class="dev__title">整合实现一</span></b></h4></span>
</blockquote>
<p>1、引入Spring配置文件beans.xml</p>
<code-box id="Rd37FY" style="position: relative;display: block;"><button code-id="Rd37FY" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Rd37FY" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Rd37FY" class="mCustomScrollbar _mCS_121 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_121" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_121_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-r5y6n7"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
<code-line class="line-numbers-rows"></code-line>      <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
<code-line class="line-numbers-rows"></code-line>       http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span>
</code-pre></div></div><div id="mCSB_121_scrollbar_vertical" class="mCSB_scrollTools mCSB_121_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_121_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_121_scrollbar_horizontal" class="mCSB_scrollTools mCSB_121_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_121_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、配置数据源替换mybaits的数据源</p>
<code-box id="KXcrff" style="position: relative;display: block;"><button code-id="KXcrff" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-KXcrff" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-KXcrff" class="mCustomScrollbar _mCS_122 mCS-autoHide"><div id="mCSB_122" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_122_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 906px;" dir="ltr"><code-pre class="code-pre" id="pre-58WRaW"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--配置数据源：数据源有非常多，可以使用第三方的，也可使使用Spring的--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driverClassName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.jdbc.Driver"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="hljs-symbol">&amp;amp;</span>useUnicode=true<span class="hljs-symbol">&amp;amp;</span>characterEncoding=utf8"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"root"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"123456"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_122_scrollbar_vertical" class="mCSB_scrollTools mCSB_122_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_122_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_122_scrollbar_horizontal" class="mCSB_scrollTools mCSB_122_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_122_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; display: block; width: 437px; max-width: 617px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、配置SqlSessionFactory，关联MyBatis</p>
<code-box id="tsxHEr" style="position: relative;display: block;"><button code-id="tsxHEr" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-tsxHEr" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-tsxHEr" class="mCustomScrollbar _mCS_123 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_123" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_123_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-nswy67"><code-line class="line-numbers-rows"></code-line><code class="language-xaml">&lt;!--配置SqlSessionFactory--&gt;
<code-line class="line-numbers-rows"></code-line>&lt;bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"&gt;
<code-line class="line-numbers-rows"></code-line>   &lt;property name="dataSource" ref="dataSource"/&gt;
<code-line class="line-numbers-rows"></code-line>   &lt;!--关联Mybatis--&gt;
<code-line class="line-numbers-rows"></code-line>   &lt;property name="configLocation" value="classpath:mybatis-config.xml"/&gt;
<code-line class="line-numbers-rows"></code-line>   &lt;property name="mapperLocations" value="classpath:com/kuang/dao/*.xml"/&gt;
<code-line class="line-numbers-rows"></code-line>&lt;/bean&gt;
</code></code-pre></div></div><div id="mCSB_123_scrollbar_vertical" class="mCSB_scrollTools mCSB_123_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_123_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_123_scrollbar_horizontal" class="mCSB_scrollTools mCSB_123_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_123_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>4、注册sqlSessionTemplate，关联sqlSessionFactory；</p>
<code-box id="XFdfDJ" style="position: relative;display: block;"><button code-id="XFdfDJ" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-XFdfDJ" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-XFdfDJ" class="mCustomScrollbar _mCS_124 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_124" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_124_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-TpswdK"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--注册sqlSessionTemplate , 关联sqlSessionFactory--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sqlSession"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.mybatis.spring.SqlSessionTemplate"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">&lt;!--利用构造器注入--&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">index</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"sqlSessionFactory"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_124_scrollbar_vertical" class="mCSB_scrollTools mCSB_124_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_124_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_124_scrollbar_horizontal" class="mCSB_scrollTools mCSB_124_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_124_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>5、增加Dao接口的实现类；私有化sqlSessionTemplate</p>
<code-box id="fR6XxN" style="position: relative;display: block;"><button code-id="fR6XxN" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-fR6XxN" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-fR6XxN" class="mCustomScrollbar _mCS_125 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_125" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_125_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-MerSak"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//sqlSession不用我们自己创建了，Spring来管理</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-keyword">private</span> SqlSessionTemplate sqlSession;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSqlSession</span><span class="hljs-params">(SqlSessionTemplate sqlSession)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">this</span>.sqlSession = sqlSession;
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       UserMapper mapper = sqlSession.getMapper(UserMapper.class);
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> mapper.selectUser();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_125_scrollbar_vertical" class="mCSB_scrollTools mCSB_125_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_125_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_125_scrollbar_horizontal" class="mCSB_scrollTools mCSB_125_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_125_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>6、注册bean实现</p>
<code-box id="sGFD36" style="position: relative;display: block;"><button code-id="sGFD36" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-sGFD36" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-sGFD36" class="mCustomScrollbar _mCS_126 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_126" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_126_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-bjTM7N"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userDao"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.dao.UserDaoImpl"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sqlSession"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"sqlSession"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_126_scrollbar_vertical" class="mCSB_scrollTools mCSB_126_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_126_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_126_scrollbar_horizontal" class="mCSB_scrollTools mCSB_126_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_126_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>7、测试</p>
<code-box id="Z5ehm5" style="position: relative;display: block;"><button code-id="Z5ehm5" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Z5ehm5" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Z5ehm5" class="mCustomScrollbar _mCS_127 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_127" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_127_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-eyF5Qm"><code-line class="line-numbers-rows"></code-line>   <span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>       ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>       UserMapper mapper = (UserMapper) context.getBean(<span class="hljs-string">"userDao"</span>);
<code-line class="line-numbers-rows"></code-line>       List&lt;User&gt; user = mapper.selectUser();
<code-line class="line-numbers-rows"></code-line>       System.out.println(user);
<code-line class="line-numbers-rows"></code-line>  }
</code-pre></div></div><div id="mCSB_127_scrollbar_vertical" class="mCSB_scrollTools mCSB_127_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_127_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_127_scrollbar_horizontal" class="mCSB_scrollTools mCSB_127_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_127_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>结果成功输出！现在我们的Mybatis配置文件的状态！发现都可以被Spring整合！</p>
<code-box id="Edj8Mp" style="position: relative;display: block;"><button code-id="Edj8Mp" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Edj8Mp" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Edj8Mp" class="mCustomScrollbar _mCS_128 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_128" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_128_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-Fc43AQ"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">configuration</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.kuang.pojo"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code-pre></div></div><div id="mCSB_128_scrollbar_vertical" class="mCSB_scrollTools mCSB_128_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_128_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_128_scrollbar_horizontal" class="mCSB_scrollTools mCSB_128_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_128_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="124、整合实现二" tid="tid-amGde4" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>13</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>4</i></b></span><b class="dev__developer"><span class="dev__title">12.4、整合实现二</span></b></h2></span>
<p>mybatis-spring1.2.3版以上的才有这个 .</p>
<p>官方文档截图 :</p>
<p>dao继承Support类 , 直接利用 getSqlSession() 获得 , 然后直接注入SqlSessionFactory . 比起方式1 , 不需要管理SqlSessionTemplate , 而且对事务的支持更加友好 . 可跟踪源码查看</p>
<p><a data-fancybox="gallery" href="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JXnZ2vicYHdibF3mvk0w89Cq6qzPguHd15ribJeF3ickXAy98VG8YFjxwftEdsvvCLWkWLPeiaiaVibbPxQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1"><img src="https://mmbiz.qpic.cn/mmbiz_png/uJDAUKrGC7JXnZ2vicYHdibF3mvk0w89Cq6qzPguHd15ribJeF3ickXAy98VG8YFjxwftEdsvvCLWkWLPeiaiaVibbPxQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="img" loading="lazy"></a></p>
<p>测试：</p>
<p>1、将我们上面写的UserDaoImpl修改一下</p>
<code-box id="JPhewA" style="position: relative;display: block;"><button code-id="JPhewA" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-JPhewA" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-JPhewA" class="mCustomScrollbar _mCS_129 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_129" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_129_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-2M6NFd"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SqlSessionDaoSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span> </span>{
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       UserMapper mapper = getSqlSession().getMapper(UserMapper.class);
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> mapper.selectUser();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_129_scrollbar_vertical" class="mCSB_scrollTools mCSB_129_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_129_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_129_scrollbar_horizontal" class="mCSB_scrollTools mCSB_129_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_129_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>2、修改bean的配置</p>
<code-box id="rtw5AZ" style="position: relative;display: block;"><button code-id="rtw5AZ" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-rtw5AZ" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-rtw5AZ" class="mCustomScrollbar _mCS_130 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_130" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_130_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-iJ4pXh"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userDao"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.kuang.dao.UserDaoImpl"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sqlSessionFactory"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"sqlSessionFactory"</span> /&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_130_scrollbar_vertical" class="mCSB_scrollTools mCSB_130_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_130_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_130_scrollbar_horizontal" class="mCSB_scrollTools mCSB_130_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_130_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>3、测试</p>
<code-box id="ZPW8ST" style="position: relative;display: block;"><button code-id="ZPW8ST" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-ZPW8ST" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-ZPW8ST" class="mCustomScrollbar _mCS_131 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_131" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_131_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-AJRN8y"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>   UserMapper mapper = (UserMapper) context.getBean(<span class="hljs-string">"userDao"</span>);
<code-line class="line-numbers-rows"></code-line>   List&lt;User&gt; user = mapper.selectUser();
<code-line class="line-numbers-rows"></code-line>   System.out.println(user);
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_131_scrollbar_vertical" class="mCSB_scrollTools mCSB_131_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_131_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_131_scrollbar_horizontal" class="mCSB_scrollTools mCSB_131_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_131_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>总结 : 整合到spring以后可以完全不要mybatis的配置文件，除了这些方式可以实现整合之外，我们还可以使用注解来实现，这个等我们后面学习SpringBoot的时候还会测试整合！</strong></p>
<span title-type="h1" class="header__span" style="transform:scale(1.0);"><h1 id="13、声明式事务" tid="tid-mapQea" class="header__dev"><span style=""><b class="dev__fe"><i>14</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>0</i></b></span><b class="dev__developer"><span class="dev__title">13、声明式事务</span></b></h1></span>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="131、回顾事务" tid="tid-nbHaX4" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>14</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>1</i></b></span><b class="dev__developer"><span class="dev__title">13.1、回顾事务</span></b></h2></span>
<ul>
<li>事务在项目开发过程非常重要，涉及到数据的一致性的问题，不容马虎！</li>
<li>事务管理是企业级应用程序开发中必备技术，用来确保数据的完整性和一致性。</li>
</ul>
<p>事务就是把一系列的动作当成一个独立的工作单元，这些动作要么全部完成，要么全部不起作用。</p>
<p><strong>事务四个属性ACID</strong></p>
<ol>
<li>
<p>原子性（atomicity）</p>
</li>
<li>
<ul>
<li>事务是原子性操作，由一系列动作组成，事务的原子性确保动作要么全部完成，要么完全不起作用</li>
</ul>
</li>
<li>
<p>一致性（consistency）</p>
</li>
<li>
<ul>
<li>一旦所有事务动作完成，事务就要被提交。数据和资源处于一种满足业务规则的一致性状态中</li>
</ul>
</li>
<li>
<p>隔离性（isolation）</p>
</li>
<li>
<ul>
<li>可能多个事务会同时处理相同的数据，因此每个事务都应该与其他事务隔离开来，防止数据损坏</li>
</ul>
</li>
<li>
<p>持久性（durability）</p>
</li>
<li>
<ul>
<li>事务一旦完成，无论系统发生什么错误，结果都不会受到影响。通常情况下，事务的结果被写到持久化存储器中</li>
</ul>
</li>
</ol>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="132、测试" tid="tid-MGQkY4" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>14</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>2</i></b></span><b class="dev__developer"><span class="dev__title">13.2、测试</span></b></h2></span>
<p>将上面的代码拷贝到一个新项目中</p>
<p>在之前的案例中，我们给userDao接口新增两个方法，删除和增加用户；</p>
<code-box id="7K7k63" style="position: relative;display: block;"><button code-id="7K7k63" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-7K7k63" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-7K7k63" class="mCustomScrollbar _mCS_132 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_132" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_132_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-bM84F4"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//添加一个用户</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span></span>;
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-comment">//根据id删除用户</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;
</code-pre></div></div><div id="mCSB_132_scrollbar_vertical" class="mCSB_scrollTools mCSB_132_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_132_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_132_scrollbar_horizontal" class="mCSB_scrollTools mCSB_132_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_132_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>mapper文件，我们故意把 deletes 写错，测试！</p>
<code-box id="KzDGGM" style="position: relative;display: block;"><button code-id="KzDGGM" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-KzDGGM" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-KzDGGM" class="mCustomScrollbar _mCS_133 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_133" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_133_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-34dAZ3"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"addUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"com.kuang.pojo.User"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>insert into user (id,name,pwd) values (#{id},#{name},#{pwd})
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deleteUser"</span> <span class="hljs-attr">parameterType</span>=<span class="hljs-string">"int"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>deletes from user where id = #{id}
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span>
</code-pre></div></div><div id="mCSB_133_scrollbar_vertical" class="mCSB_scrollTools mCSB_133_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_133_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_133_scrollbar_horizontal" class="mCSB_scrollTools mCSB_133_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_133_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>编写接口的实现类，在实现类中，我们去操作一波</p>
<code-box id="Tk5Krz" style="position: relative;display: block;"><button code-id="Tk5Krz" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-Tk5Krz" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-Tk5Krz" class="mCustomScrollbar _mCS_134 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_134" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_134_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-W6BtGs"><code-line class="line-numbers-rows"></code-line><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserDaoImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SqlSessionDaoSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">UserMapper</span> </span>{
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//增加一些操作</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">selectUser</span><span class="hljs-params">()</span> </span>{
<code-line class="line-numbers-rows"></code-line>       User user = <span class="hljs-keyword">new</span> User(<span class="hljs-number">4</span>,<span class="hljs-string">"小明"</span>,<span class="hljs-string">"123456"</span>);
<code-line class="line-numbers-rows"></code-line>       UserMapper mapper = getSqlSession().getMapper(UserMapper.class);
<code-line class="line-numbers-rows"></code-line>       mapper.addUser(user);
<code-line class="line-numbers-rows"></code-line>       mapper.deleteUser(<span class="hljs-number">4</span>);
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> mapper.selectUser();
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//新增</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       UserMapper mapper = getSqlSession().getMapper(UserMapper.class);
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> mapper.addUser(user);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-comment">//删除</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span> </span>{
<code-line class="line-numbers-rows"></code-line>       UserMapper mapper = getSqlSession().getMapper(UserMapper.class);
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-keyword">return</span> mapper.deleteUser(id);
<code-line class="line-numbers-rows"></code-line>  }
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_134_scrollbar_vertical" class="mCSB_scrollTools mCSB_134_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_134_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_134_scrollbar_horizontal" class="mCSB_scrollTools mCSB_134_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_134_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>测试</p>
<code-box id="zZCSJN" style="position: relative;display: block;"><button code-id="zZCSJN" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-zZCSJN" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-zZCSJN" class="mCustomScrollbar _mCS_135 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_135" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_135_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-ZCjQyf"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>   UserMapper mapper = (UserMapper) context.getBean(<span class="hljs-string">"userDao"</span>);
<code-line class="line-numbers-rows"></code-line>   List&lt;User&gt; user = mapper.selectUser();
<code-line class="line-numbers-rows"></code-line>   System.out.println(user);
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_135_scrollbar_vertical" class="mCSB_scrollTools mCSB_135_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_135_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_135_scrollbar_horizontal" class="mCSB_scrollTools mCSB_135_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_135_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p>报错：sql异常，delete写错了</p>
<p>结果 ：插入成功！</p>
<p>没有进行事务的管理；我们想让他们都成功才成功，有一个失败，就都失败，我们就应该需要<strong>事务！</strong></p>
<p>以前我们都需要自己手动管理事务，十分麻烦！</p>
<p>但是Spring给我们提供了事务管理，我们只需要配置即可；</p>
<span title-type="h2" class="header__span" style="transform:scale(0.9);left: -36.80px;"><h2 id="133、spring中的事务管理" tid="tid-KjJJHj" class="header__dev"><span style="position: relative;left: -5px;"><b class="dev__fe"><i>14</i></b><span class="dev__slash">|</span><b class="dev__ux"><i>3</i></b></span><b class="dev__developer"><span class="dev__title">13.3、Spring中的事务管理</span></b></h2></span>
<p>Spring在不同的事务管理API之上定义了一个抽象层，使得开发人员不必了解底层的事务管理API就可以使用Spring的事务管理机制。Spring支持编程式事务管理和声明式的事务管理。</p>
<p><strong>编程式事务管理</strong></p>
<ul>
<li>将事务管理代码嵌到业务方法中来控制事务的提交和回滚</li>
<li>缺点：必须在每个事务操作业务逻辑中包含额外的事务管理代码</li>
</ul>
<p><strong>声明式事务管理</strong></p>
<ul>
<li>一般情况下比编程式事务好用。</li>
<li>将事务管理代码从业务方法中分离出来，以声明的方式来实现事务管理。</li>
<li>将事务管理作为横切关注点，通过aop方法模块化。Spring中通过Spring AOP框架支持声明式事务管理。</li>
</ul>
<p><strong>使用Spring管理事务，注意头文件的约束导入 : tx</strong></p>
<code-box id="hGj66T" style="position: relative;display: block;"><button code-id="hGj66T" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-hGj66T" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-hGj66T" class="mCustomScrollbar _mCS_136 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_136" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_136_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-YjdTwm"><code-line class="line-numbers-rows"></code-line>xmlns:tx="http://www.springframework.org/schema/tx"
<code-line class="line-numbers-rows"></code-line>
<code-line class="line-numbers-rows"></code-line>http://www.springframework.org/schema/tx
<code-line class="line-numbers-rows"></code-line>http://www.springframework.org/schema/tx/spring-tx.xsd"&gt;
</code-pre></div></div><div id="mCSB_136_scrollbar_vertical" class="mCSB_scrollTools mCSB_136_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_136_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_136_scrollbar_horizontal" class="mCSB_scrollTools mCSB_136_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_136_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>事务管理器</strong></p>
<ul>
<li>无论使用Spring的哪种事务管理策略（编程式或者声明式）事务管理器都是必须的。</li>
<li>就是 Spring的核心事务管理抽象，管理封装了一组独立于技术的方法。</li>
</ul>
<p><strong>JDBC事务</strong></p>
<code-box id="724jJC" style="position: relative;display: block;"><button code-id="724jJC" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-724jJC" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-724jJC" class="mCustomScrollbar _mCS_137 mCS-autoHide"><div id="mCSB_137" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_137_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y" style="position: relative; top: 0px; left: 0px; width: 731px;" dir="ltr"><code-pre class="code-pre" id="pre-hmAQbY"><code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"transactionManager"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dataSource"</span> /&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>
</code-pre></div></div><div id="mCSB_137_scrollbar_vertical" class="mCSB_scrollTools mCSB_137_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_137_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_137_scrollbar_horizontal" class="mCSB_scrollTools mCSB_137_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: block;"><div class="mCSB_draggerContainer"><div id="mCSB_137_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 541px; left: 0px; display: block; max-width: 617px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>配置好事务管理器后我们需要去配置事务的通知</strong></p>
<code-box id="8yjwrJ" style="position: relative;display: block;"><button code-id="8yjwrJ" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-8yjwrJ" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-8yjwrJ" class="mCustomScrollbar _mCS_138 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_138" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_138_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-DyAh6B"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--配置事务通知--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">tx:advice</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"txAdvice"</span> <span class="hljs-attr">transaction-manager</span>=<span class="hljs-string">"transactionManager"</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">tx:attributes</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-comment">&lt;!--配置哪些方法使用什么样的事务,配置事务的传播特性--&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"add"</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">"REQUIRED"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"delete"</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">"REQUIRED"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"update"</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">"REQUIRED"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"search*"</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">"REQUIRED"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"get"</span> <span class="hljs-attr">read-only</span>=<span class="hljs-string">"true"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>       <span class="hljs-tag">&lt;<span class="hljs-name">tx:method</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"*"</span> <span class="hljs-attr">propagation</span>=<span class="hljs-string">"REQUIRED"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;/<span class="hljs-name">tx:attributes</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">tx:advice</span>&gt;</span>
</code-pre></div></div><div id="mCSB_138_scrollbar_vertical" class="mCSB_scrollTools mCSB_138_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_138_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_138_scrollbar_horizontal" class="mCSB_scrollTools mCSB_138_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_138_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>spring事务传播特性：</strong></p>
<p>事务传播行为就是多个事务方法相互调用时，事务如何在这些方法间传播。spring支持7种事务传播行为：</p>
<ul>
<li>propagation_requierd：如果当前没有事务，就新建一个事务，如果已存在一个事务中，加入到这个事务中，这是最常见的选择。</li>
<li>propagation_supports：支持当前事务，如果没有当前事务，就以非事务方法执行。</li>
<li>propagation_mandatory：使用当前事务，如果没有当前事务，就抛出异常。</li>
<li>propagation_required_new：新建事务，如果当前存在事务，把当前事务挂起。</li>
<li>propagation_not_supported：以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。</li>
<li>propagation_never：以非事务方式执行操作，如果当前事务存在则抛出异常。</li>
<li>propagation_nested：如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则执行与propagation_required类似的操作</li>
</ul>
<p>Spring 默认的事务传播行为是 PROPAGATION_REQUIRED，它适合于绝大多数的情况。</p>
<p>假设 ServiveX#methodX() 都工作在事务环境下（即都被 Spring 事务增强了），假设程序中存在如下的调用链：Service1#method1()-&gt;Service2#method2()-&gt;Service3#method3()，那么这 3 个服务类的 3 个方法通过 Spring 的事务传播机制都工作在同一个事务中。</p>
<p>就好比，我们刚才的几个方法存在调用，所以会被放在一组事务当中！</p>
<p><strong>配置AOP</strong></p>
<p>导入aop的头文件！</p>
<code-box id="inhhGa" style="position: relative;display: block;"><button code-id="inhhGa" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-inhhGa" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-inhhGa" class="mCustomScrollbar _mCS_139 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_139" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_139_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-zTZDai"><code-line class="line-numbers-rows"></code-line><span class="hljs-comment">&lt;!--配置aop织入事务--&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"txPointcut"</span> <span class="hljs-attr">expression</span>=<span class="hljs-string">"execution(* com.kuang.dao.*.*(..))"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line>   <span class="hljs-tag">&lt;<span class="hljs-name">aop:advisor</span> <span class="hljs-attr">advice-ref</span>=<span class="hljs-string">"txAdvice"</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"txPointcut"</span>/&gt;</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span>
</code-pre></div></div><div id="mCSB_139_scrollbar_vertical" class="mCSB_scrollTools mCSB_139_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_139_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_139_scrollbar_horizontal" class="mCSB_scrollTools mCSB_139_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_139_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<p><strong>进行测试</strong></p>
<p>删掉刚才插入的数据，再次测试！</p>
<code-box id="F2HtaS" style="position: relative;display: block;"><button code-id="F2HtaS" type="button" class="clipboard code-copay-btn" data-clipboard-action="copy" data-clipboard-target="#pre-F2HtaS" aria-label="复制代码" style="color: rgb(153, 153, 153);"><i class="iconfont icon-fuzhi1"></i></button><pre style="font-family: &quot;Ubuntu Mono&quot;, monospace !important; font-size: 14px !important; background-color: rgb(246, 248, 250); overflow: visible; position: relative;" id="pre-F2HtaS" class="mCustomScrollbar _mCS_140 mCS-autoHide mCS_no_scrollbar"><div id="mCSB_140" class="mCustomScrollBox mCS-minimal-dark mCSB_vertical_horizontal mCSB_outside" style="max-height: none;" tabindex="0"><div id="mCSB_140_container" class="mCSB_container mCS_y_hidden mCS_no_scrollbar_y mCS_x_hidden mCS_no_scrollbar_x" style="position: relative; top: 0px; left: 0px; width: 100%;" dir="ltr"><code-pre class="code-pre" id="pre-cXerFy"><code-line class="line-numbers-rows"></code-line><span class="hljs-meta">@Test</span>
<code-line class="line-numbers-rows"></code-line><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>{
<code-line class="line-numbers-rows"></code-line>   ApplicationContext context = <span class="hljs-keyword">new</span> ClassPathXmlApplicationContext(<span class="hljs-string">"beans.xml"</span>);
<code-line class="line-numbers-rows"></code-line>   UserMapper mapper = (UserMapper) context.getBean(<span class="hljs-string">"userDao"</span>);
<code-line class="line-numbers-rows"></code-line>   List&lt;User&gt; user = mapper.selectUser();
<code-line class="line-numbers-rows"></code-line>   System.out.println(user);
<code-line class="line-numbers-rows"></code-line>}
</code-pre></div></div><div id="mCSB_140_scrollbar_vertical" class="mCSB_scrollTools mCSB_140_scrollbar mCS-minimal-dark mCSB_scrollTools_vertical" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_140_dragger_vertical" class="mCSB_dragger" style="position: absolute; min-height: 50px; height: 0px; top: 0px;"><div class="mCSB_dragger_bar" style="line-height: 50px;"></div></div><div class="mCSB_draggerRail"></div></div></div><div id="mCSB_140_scrollbar_horizontal" class="mCSB_scrollTools mCSB_140_scrollbar mCS-minimal-dark mCSB_scrollTools_horizontal" style="display: none;"><div class="mCSB_draggerContainer"><div id="mCSB_140_dragger_horizontal" class="mCSB_dragger" style="position: absolute; min-width: 50px; width: 0px; left: 0px;"><div class="mCSB_dragger_bar"></div></div><div class="mCSB_draggerRail"></div></div></div></pre></code-box>
<blockquote>
<p>思考问题？</p>
</blockquote>
<p>为什么需要配置事务？</p>
<ul>
<li>如果不配置，就需要我们手动提交控制事务；</li>
<li>事务在项目开发过程非常重要，涉及到数据的一致性的问题，不容马虎！</li>
</ul>











<div id="sidebar_topdiggedposts" class="sidebar-block">
<div id="topdigg_posts_wrap">
    <div class="catListView">
        <h3 class="catListTitle">推荐排行榜</h3>
        <div id="TopDiggPostsBlock">
            <ul style="word-break: break-all">
                        <li>
                            <a href="https://www.cnblogs.com/renxuw/p/12994080.html">
                                1. Spring学习笔记-狂神版(5)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/renxuw/p/13047424.html">
                                2. Mybatis学习笔记-狂神版(4)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/renxuw/p/13033344.html">
                                3. SpringMVC学习笔记(1)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/renxuw/p/12965355.html">
                                4. Mybatis问题记录-狂神版(1)
                            </a>
                        </li>
                        <li>
                            <a href="https://www.cnblogs.com/renxuw/p/12855669.html">
                                5. 如何访问OneDrive(1)
                            </a>
                        </li>
            </ul>
        </div>
    </div>
</div></div></div>




​    
